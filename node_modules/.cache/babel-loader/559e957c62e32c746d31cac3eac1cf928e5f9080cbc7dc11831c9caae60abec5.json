{"ast":null,"code":"var _jsxFileName = \"/media/sj/linux/annotator/behavior_annotator/frame-tool-jm-main/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport { Button, Select, MenuItem, Box, Typography, Grid, Table, TableHead, TableRow, TableCell, TableBody, CircularProgress, TextField, FormControl, InputLabel, Slider, IconButton } from \"@mui/material\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport Brightness4Icon from \"@mui/icons-material/Brightness4\";\nimport Brightness7Icon from \"@mui/icons-material/Brightness7\";\nimport Papa from \"papaparse\";\nimport JSZip from \"jszip\";\nimport { saveAs } from \"file-saver\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst behaviors = [\"jumping\", \"unsupported rearing\", \"supported rearing\", \"grooming\", \"freezing\", \"etc\"];\nconst rowsPerPage = 15;\nfunction App() {\n  _s();\n  const [intervals, setIntervals] = useState([]);\n  const [intervalStartFrame, setIntervalStartFrame] = useState(\"\");\n  const [intervalEndFrame, setIntervalEndFrame] = useState(\"\");\n  const [intervalBehavior, setIntervalBehavior] = useState(behaviors[0]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isConverting, setIsConverting] = useState(false);\n  const [page, setPage] = useState(0);\n  const [frameRate, setFrameRate] = useState(30); // Default FPS set to 30\n  const [frameInterval, setFrameInterval] = useState(100); // Frame transition interval in ms\n  const [videoUrl, setVideoUrl] = useState(null);\n  const [videoDuration, setVideoDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [currentFrame, setCurrentFrame] = useState(0);\n  const currentFrameRef = useRef(0);\n  const [markStart, setMarkStart] = useState(null);\n  const [isAddingInterval, setIsAddingInterval] = useState(false);\n  const [themeMode, setThemeMode] = useState(\"light\");\n  const [arrowPressed, setArrowPressed] = useState(null);\n  const [zoom, setZoom] = useState(1);\n  const [panX, setPanX] = useState(0);\n  const [panY, setPanY] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const videoRef = useRef(null);\n  const frameIntervalRef = useRef(null);\n  const videoContainerRef = useRef(null);\n  const theme = createTheme({\n    palette: {\n      mode: themeMode,\n      ...(themeMode === \"dark\" ? {\n        background: {\n          default: \"#121212\",\n          paper: \"#1e1e1e\"\n        },\n        text: {\n          primary: \"#d2d2d2ff\"\n        },\n        primary: {\n          main: \"#e7657cff\"\n        }\n      } : {\n        background: {\n          default: \"#ffffff\",\n          paper: \"#ffffff\"\n        },\n        text: {\n          primary: \"#000000\"\n        },\n        primary: {\n          main: \"#e7657cff\"\n        }\n      })\n    }\n  });\n  const toggleTheme = () => {\n    setThemeMode(prev => prev === \"light\" ? \"dark\" : \"light\");\n  };\n  async function onFileChange(e) {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) {\n      alert(\"Please select a video.\");\n      return;\n    }\n    setIsUploading(true);\n    setIsConverting(true);\n    const file = files[0];\n    if (!file.type.startsWith(\"video/\")) {\n      alert(\"Only video files can be uploaded.\");\n      setIsUploading(false);\n      setIsConverting(false);\n      return;\n    }\n    console.log(\"Video file uploaded:\", file.name, \"Type:\", file.type);\n    const fd = new FormData();\n    fd.append(\"video\", file);\n    try {\n      const res = await fetch(\"http://localhost:5000/process-video\", {\n        method: \"POST\",\n        body: fd\n      }).then(res => res.json());\n      if (res.status === \"error\") {\n        alert(`Video processing failed: ${res.msg}`);\n        setIsUploading(false);\n        setIsConverting(false);\n        return;\n      }\n      setVideoUrl(res.converted_url);\n      setCurrentTime(0);\n      setCurrentFrame(0);\n      currentFrameRef.current = 0;\n      setIntervals([]);\n      setMarkStart(null);\n      setIntervalStartFrame(\"\");\n      setIntervalEndFrame(\"\");\n      setPage(0);\n    } catch (error) {\n      alert(`Video processing failed: ${error.message}`);\n      setIsUploading(false);\n      setIsConverting(false);\n    }\n    setIsUploading(false);\n    setIsConverting(false);\n  }\n  useEffect(() => {\n    if (videoUrl && videoRef.current) {\n      console.log(\"Setting video src:\", videoUrl);\n      videoRef.current.src = videoUrl;\n      videoRef.current.load();\n      videoRef.current.onloadedmetadata = () => {\n        console.log(\"Video metadata loaded, duration:\", videoRef.current.duration);\n        setVideoDuration(videoRef.current.duration);\n      };\n      videoRef.current.onerror = e => {\n        console.error(\"Video error:\", e);\n        alert(\"Video playback failed: Please check the converted MP4 file.\");\n      };\n    }\n    return () => {\n      if (videoRef.current) {\n        console.log(\"Cleaning up videoRef\");\n        videoRef.current.onloadedmetadata = null;\n        videoRef.current.onerror = null;\n      }\n    };\n  }, [videoUrl]);\n  useEffect(() => {\n    const handleKeyDown = e => {\n      e.preventDefault();\n      if (isAddingInterval) return;\n      if (e.code === \"KeyS\") {\n        markIntervalStart();\n      } else if (e.code === \"KeyE\") {\n        markIntervalEnd();\n      } else if ([\"Digit1\", \"Digit2\", \"Digit3\", \"Digit4\", \"Digit5\", \"Digit6\"].includes(e.code)) {\n        const behaviorIndex = parseInt(e.code.replace(\"Digit\", \"\")) - 1;\n        if (behaviorIndex < behaviors.length && markStart !== null && intervalEndFrame !== \"\") {\n          setIsAddingInterval(true);\n          const selectedBehavior = behaviors[behaviorIndex];\n          console.log(`Behavior selected and interval added: ${selectedBehavior}`);\n          setIntervalBehavior(selectedBehavior);\n          addInterval(selectedBehavior);\n        }\n      } else if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\n        setArrowPressed(e.code);\n      }\n    };\n    const handleKeyUp = e => {\n      if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\n        setArrowPressed(null);\n        if (markStart !== null) {\n          markIntervalEnd();\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"keyup\", handleKeyUp);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, [markStart, intervalEndFrame, isAddingInterval]);\n  useEffect(() => {\n    currentFrameRef.current = currentFrame;\n  }, [currentFrame]);\n  useEffect(() => {\n    if (arrowPressed) {\n      const moveFrame = () => {\n        if (!videoRef.current) return;\n        const direction = arrowPressed === \"ArrowRight\" ? 1 : -1;\n        const newFrame = currentFrameRef.current + direction;\n        const newTime = newFrame / frameRate;\n        if (newTime >= 0 && newTime <= videoDuration) {\n          setCurrentTime(newTime);\n          setCurrentFrame(newFrame);\n          currentFrameRef.current = newFrame;\n          videoRef.current.currentTime = newTime;\n          console.log(`Moved to frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n        }\n        frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\n      };\n      frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\n    } else {\n      if (frameIntervalRef.current) {\n        clearTimeout(frameIntervalRef.current);\n        frameIntervalRef.current = null;\n      }\n    }\n    return () => {\n      if (frameIntervalRef.current) {\n        clearTimeout(frameIntervalRef.current);\n      }\n    };\n  }, [arrowPressed, frameRate, videoDuration, frameInterval]);\n  useEffect(() => {\n    if (isAddingInterval) {\n      setIsAddingInterval(false);\n    }\n  }, [intervals]);\n  function handleTimeUpdate() {\n    if (!videoRef.current) return;\n    const time = videoRef.current.currentTime;\n    setCurrentTime(time);\n    const newFrame = Math.round(time * frameRate);\n    setCurrentFrame(newFrame);\n    currentFrameRef.current = newFrame;\n  }\n  function handleSliderChange(event, newValue) {\n    const newTime = newValue / frameRate;\n    setCurrentTime(newTime);\n    setCurrentFrame(newValue);\n    currentFrameRef.current = newValue;\n    if (videoRef.current) {\n      console.log(\"Slider changed, setting video frame:\", newValue);\n      videoRef.current.currentTime = newTime;\n    }\n  }\n  function moveNextFrame() {\n    const newFrame = currentFrame + 1;\n    const newTime = newFrame / frameRate;\n    if (newTime <= videoDuration) {\n      setCurrentTime(newTime);\n      setCurrentFrame(newFrame);\n      currentFrameRef.current = newFrame;\n      if (videoRef.current) {\n        videoRef.current.currentTime = newTime;\n        console.log(`Next frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n      }\n    }\n  }\n  function movePrevFrame() {\n    const newFrame = currentFrame - 1;\n    const newTime = newFrame / frameRate;\n    if (newTime >= 0) {\n      setCurrentTime(newTime);\n      setCurrentFrame(newFrame);\n      currentFrameRef.current = newFrame;\n      if (videoRef.current) {\n        videoRef.current.currentTime = newTime;\n        console.log(`Previous frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n      }\n    }\n  }\n\n  // Zoom functions\n  function zoomIn() {\n    setZoom(prev => Math.min(prev * 1.5, 5)); // Max zoom 5x\n  }\n  function zoomOut() {\n    setZoom(prev => Math.max(prev / 1.5, 0.5)); // Min zoom 0.5x\n  }\n  function resetZoom() {\n    setZoom(1);\n    setPanX(0);\n    setPanY(0);\n  }\n  function handleWheel(e) {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? 0.9 : 1.1;\n    setZoom(prev => Math.min(Math.max(prev * delta, 0.5), 5));\n  }\n  function handleMouseDown(e) {\n    setIsDragging(true);\n    setDragStart({\n      x: e.clientX - panX,\n      y: e.clientY - panY\n    });\n  }\n  function handleMouseMove(e) {\n    if (!isDragging) return;\n    setPanX(e.clientX - dragStart.x);\n    setPanY(e.clientY - dragStart.y);\n  }\n  function handleMouseUp() {\n    setIsDragging(false);\n  }\n  function markIntervalStart() {\n    setMarkStart(currentFrameRef.current);\n    setIntervalStartFrame(currentFrameRef.current);\n    setIntervalEndFrame(\"\");\n    console.log(\"Interval start marked:\", currentFrameRef.current);\n  }\n  function markIntervalEnd() {\n    if (markStart === null) {\n      alert(\"Please mark the start frame first.\");\n      return;\n    }\n    setIntervalEndFrame(currentFrameRef.current);\n    console.log(\"Interval end updated:\", currentFrameRef.current);\n  }\n  function addInterval(behavior) {\n    const startFrame = parseInt(intervalStartFrame);\n    const endFrame = parseInt(intervalEndFrame);\n    const startTime = startFrame / frameRate;\n    const endTime = endFrame / frameRate;\n    const maxFrame = Math.round(videoDuration * frameRate);\n    if (isNaN(startFrame) || isNaN(endFrame)) {\n      alert(\"Start and end frames must be valid numbers.\");\n      setIsAddingInterval(false);\n      return;\n    }\n    if (startFrame < 0 || endFrame > maxFrame) {\n      alert(`Frames must be between 0 and ${maxFrame}.`);\n      setIsAddingInterval(false);\n      return;\n    }\n    if (startFrame >= endFrame) {\n      alert(\"Start frame must be less than end frame.\");\n      setIsAddingInterval(false);\n      return;\n    }\n    setIntervals(prev => [...prev, {\n      start: startFrame,\n      end: endFrame,\n      startTime,\n      endTime,\n      behavior,\n      auto: false\n    }]);\n    setIntervalStartFrame(\"\");\n    setIntervalEndFrame(\"\");\n    setIntervalBehavior(behaviors[0]);\n    setMarkStart(null);\n    setPage(0);\n    console.log(\"Interval added:\", {\n      start: startFrame,\n      end: endFrame,\n      startTime,\n      endTime,\n      behavior\n    });\n  }\n  function updateIntervalBehavior(idx, newBehavior) {\n    setIntervals(prev => prev.map((interval, i) => i === idx ? {\n      ...interval,\n      behavior: newBehavior\n    } : interval));\n    console.log(\"Interval behavior updated:\", {\n      idx,\n      behavior: newBehavior\n    });\n  }\n  function removeInterval(idx) {\n    setIntervals(intervals.filter((_, i) => i !== idx));\n    if (page * rowsPerPage >= intervals.length - 1) {\n      setPage(Math.max(0, page - 1));\n    }\n  }\n  function downloadCsvAll() {\n    const zip = new JSZip();\n    const intervalData = intervals.map(i => ({\n      type: \"interval\",\n      start_time: i.startTime.toFixed(2),\n      end_time: i.endTime.toFixed(2),\n      start_frame: i.start,\n      end_frame: i.end,\n      behavior: i.behavior\n    }));\n    const intervalCsv = Papa.unparse(intervalData);\n    zip.file(\"interval_summary.csv\", intervalCsv);\n    zip.generateAsync({\n      type: \"blob\"\n    }).then(blob => {\n      saveAs(blob, \"behavior_labels.zip\");\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        bgcolor: 'background.default',\n        color: 'text.primary'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          children: \"Behavior Labeling Tool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: toggleTheme,\n          color: \"inherit\",\n          \"aria-label\": \"Toggle theme\",\n          children: themeMode === \"light\" ? /*#__PURE__*/_jsxDEV(Brightness4Icon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 38\n          }, this) : /*#__PURE__*/_jsxDEV(Brightness7Icon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 60\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          my: 2,\n          display: 'flex',\n          gap: 2,\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            gutterBottom: true,\n            children: \"Select Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"video/*\",\n            onChange: onFileChange,\n            disabled: isConverting,\n            \"aria-label\": \"Select video file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 13\n          }, this), isConverting && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 1,\n              mt: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: \"Converting video...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Frame Rate (FPS)\",\n          type: \"number\",\n          value: frameRate,\n          onChange: e => {\n            const value = e.target.value;\n            console.log(\"Frame Rate input:\", value);\n            if (value === \"\") {\n              setFrameRate(\"\");\n            } else {\n              const numValue = parseFloat(value);\n              if (!isNaN(numValue) && numValue >= 1) {\n                setFrameRate(value);\n              }\n            }\n          },\n          onBlur: () => {\n            let numValue = parseFloat(frameRate);\n            if (isNaN(numValue) || numValue < 1) {\n              console.log(\"Frame Rate reset to default: 30\");\n              setFrameRate(30);\n            } else {\n              setFrameRate(numValue);\n            }\n          },\n          size: \"small\",\n          inputProps: {\n            min: 1,\n            step: 1\n          },\n          \"aria-label\": \"Frame rate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Frame Interval (ms)\",\n          type: \"number\",\n          value: frameInterval,\n          onChange: e => {\n            const value = e.target.value;\n            console.log(\"Frame Interval input:\", value);\n            if (value === \"\") {\n              setFrameInterval(\"\");\n            } else {\n              const numValue = parseInt(value);\n              if (!isNaN(numValue) && numValue >= 10) {\n                setFrameInterval(value);\n              }\n            }\n          },\n          onBlur: () => {\n            let numValue = parseInt(frameInterval);\n            if (isNaN(numValue) || numValue < 10) {\n              console.log(\"Frame Interval reset to default: 100\");\n              setFrameInterval(100);\n            } else {\n              setFrameInterval(numValue);\n            }\n          },\n          size: \"small\",\n          inputProps: {\n            min: 10,\n            step: 1\n          },\n          \"aria-label\": \"Frame transition interval\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: downloadCsvAll,\n          variant: \"contained\",\n          color: \"primary\",\n          \"aria-label\": \"Save CSV\",\n          children: \"Save CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            children: \"Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this), !videoUrl ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: \"100%\",\n              maxWidth: \"800px\",\n              height: \"450px\",\n              backgroundColor: themeMode === \"dark\" ? \"#333\" : \"#e0e0e0\",\n              border: \"1px solid #ccc\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              color: themeMode === \"dark\" ? \"#bbb\" : \"#666\",\n              fontSize: \"1.2rem\",\n              borderRadius: \"4px\"\n            },\n            \"aria-label\": \"Video placeholder\",\n            children: \"Please upload a video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            width: \"100%\",\n            style: {\n              maxWidth: \"800px\",\n              border: \"1px solid #ccc\",\n              borderRadius: \"4px\"\n            },\n            onTimeUpdate: handleTimeUpdate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 15\n          }, this), videoUrl && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 2,\n                mt: 1,\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: movePrevFrame,\n                \"aria-label\": \"Previous frame\",\n                children: \"Prev Frame\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: moveNextFrame,\n                \"aria-label\": \"Next frame\",\n                children: \"Next Frame\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: markIntervalStart,\n                \"aria-label\": \"Mark start frame\",\n                children: \"Mark Start (S)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 523,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: markIntervalEnd,\n                \"aria-label\": \"Mark end frame\",\n                children: \"Mark End (E)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 530,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                children: [\"Current Frame: \", currentFrame, \" / \", Math.round(videoDuration * frameRate)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 537,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Slider, {\n              value: currentFrame,\n              min: 0,\n              max: Math.round(videoDuration * frameRate),\n              step: 1,\n              onChange: handleSliderChange,\n              \"aria-label\": \"Video frame timeline\",\n              sx: {\n                mt: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 2,\n              border: '1px solid #ccc',\n              borderRadius: 1,\n              bgcolor: 'background.paper',\n              height: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Behavior Intervals\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              gutterBottom: true,\n              children: \"Shortcuts: ArrowRight/ArrowLeft to navigate and mark end, S to mark start, E to update end, 1-6 to select behavior and add interval\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 2,\n                alignItems: 'center',\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Start Frame\",\n                type: \"number\",\n                value: intervalStartFrame,\n                onChange: e => {\n                  const v = e.target.value;\n                  console.log(\"Start Frame input:\", v);\n                  setIntervalStartFrame(v);\n                  if (v !== \"\") setMarkStart(Number(v));else setMarkStart(null);\n                },\n                size: \"small\",\n                inputProps: {\n                  min: 0,\n                  step: 1\n                },\n                \"aria-label\": \"Interval start frame\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"End Frame\",\n                type: \"number\",\n                value: intervalStartFrame !== \"\" ? intervalEndFrame : \"\",\n                onChange: e => {\n                  const v = e.target.value;\n                  console.log(\"End Frame input:\", v);\n                  setIntervalEndFrame(v);\n                },\n                size: \"small\",\n                inputProps: {\n                  min: intervalStartFrame !== \"\" ? Number(intervalStartFrame) : 0,\n                  step: 1\n                },\n                \"aria-label\": \"Interval end frame\",\n                disabled: intervalStartFrame === \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 575,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                size: \"small\",\n                sx: {\n                  minWidth: 200\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Behavior\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 590,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: intervalBehavior,\n                  label: \"Behavior\",\n                  onChange: e => setIntervalBehavior(e.target.value),\n                  children: behaviors.map((b, i) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: b,\n                    children: `${b} (${i + 1})`\n                  }, b, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 597,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => addInterval(intervalBehavior),\n                variant: \"contained\",\n                \"aria-label\": \"Add interval\",\n                disabled: intervalStartFrame === \"\" || intervalEndFrame === \"\",\n                children: \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              size: \"small\",\n              children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                children: /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    children: \"Interval (Frame)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 613,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: \"Behavior\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 614,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 615,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 612,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                children: intervals.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: /*#__PURE__*/_jsxDEV(TableCell, {\n                    colSpan: 3,\n                    align: \"center\",\n                    children: \"No intervals added yet.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 621,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 21\n                }, this) : intervals.slice().sort((a, b) => b.start - a.start).slice(page * rowsPerPage, (page + 1) * rowsPerPage).map((interval, i) => /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    children: `${interval.start} - ${interval.end}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 632,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      size: \"small\",\n                      sx: {\n                        minWidth: 200\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"Behavior\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 635,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        value: interval.behavior,\n                        label: \"Behavior\",\n                        onChange: e => updateIntervalBehavior(intervals.indexOf(interval), e.target.value),\n                        children: behaviors.map((b, j) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: b,\n                          children: `${b} (${j + 1})`\n                        }, b, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 642,\n                          columnNumber: 35\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 636,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 634,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 633,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outlined\",\n                      color: \"error\",\n                      size: \"small\",\n                      onClick: () => removeInterval(intervals.indexOf(interval)),\n                      \"aria-label\": `Delete interval ${i + 1}`,\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 648,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 27\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 15\n            }, this), intervals.length > rowsPerPage && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2,\n                display: 'flex',\n                gap: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setPage(p => Math.max(0, p - 1)),\n                disabled: page === 0,\n                variant: \"outlined\",\n                \"aria-label\": \"Previous page\",\n                children: \"Previous\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 665,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setPage(p => p + 1),\n                disabled: (page + 1) * rowsPerPage >= intervals.length,\n                variant: \"outlined\",\n                \"aria-label\": \"Next page\",\n                children: \"Next\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                children: [\"Page \", page + 1, \" / \", Math.ceil(intervals.length / rowsPerPage)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 681,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 383,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"jay3cOTHoOCACRftsuFc2BBCqe0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useState","useEffect","Button","Select","MenuItem","Box","Typography","Grid","Table","TableHead","TableRow","TableCell","TableBody","CircularProgress","TextField","FormControl","InputLabel","Slider","IconButton","ThemeProvider","createTheme","Brightness4Icon","Brightness7Icon","Papa","JSZip","saveAs","jsxDEV","_jsxDEV","Fragment","_Fragment","behaviors","rowsPerPage","App","_s","intervals","setIntervals","intervalStartFrame","setIntervalStartFrame","intervalEndFrame","setIntervalEndFrame","intervalBehavior","setIntervalBehavior","isUploading","setIsUploading","isConverting","setIsConverting","page","setPage","frameRate","setFrameRate","frameInterval","setFrameInterval","videoUrl","setVideoUrl","videoDuration","setVideoDuration","currentTime","setCurrentTime","currentFrame","setCurrentFrame","currentFrameRef","markStart","setMarkStart","isAddingInterval","setIsAddingInterval","themeMode","setThemeMode","arrowPressed","setArrowPressed","zoom","setZoom","panX","setPanX","panY","setPanY","isDragging","setIsDragging","dragStart","setDragStart","x","y","videoRef","frameIntervalRef","videoContainerRef","theme","palette","mode","background","default","paper","text","primary","main","toggleTheme","prev","onFileChange","e","files","Array","from","target","length","alert","file","type","startsWith","console","log","name","fd","FormData","append","res","fetch","method","body","then","json","status","msg","converted_url","current","error","message","src","load","onloadedmetadata","duration","onerror","handleKeyDown","preventDefault","code","markIntervalStart","markIntervalEnd","includes","behaviorIndex","parseInt","replace","selectedBehavior","addInterval","handleKeyUp","window","addEventListener","removeEventListener","moveFrame","direction","newFrame","newTime","toFixed","setTimeout","clearTimeout","handleTimeUpdate","time","Math","round","handleSliderChange","event","newValue","moveNextFrame","movePrevFrame","zoomIn","min","zoomOut","max","resetZoom","handleWheel","delta","deltaY","handleMouseDown","clientX","clientY","handleMouseMove","handleMouseUp","behavior","startFrame","endFrame","startTime","endTime","maxFrame","isNaN","start","end","auto","updateIntervalBehavior","idx","newBehavior","map","interval","i","removeInterval","filter","_","downloadCsvAll","zip","intervalData","start_time","end_time","start_frame","end_frame","intervalCsv","unparse","generateAsync","blob","children","sx","p","bgcolor","color","display","justifyContent","alignItems","mb","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","onClick","my","gap","accept","onChange","disabled","mt","size","label","value","numValue","parseFloat","onBlur","inputProps","step","container","spacing","item","xs","width","maxWidth","height","backgroundColor","border","fontSize","borderRadius","ref","style","onTimeUpdate","v","Number","minWidth","b","colSpan","align","slice","sort","a","indexOf","j","ceil","_c","$RefreshReg$"],"sources":["/media/sj/linux/annotator/behavior_annotator/frame-tool-jm-main/frontend/src/App.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport {\r\n  Button, Select, MenuItem, Box, Typography, Grid,\r\n  Table, TableHead, TableRow, TableCell, TableBody, CircularProgress,\r\n  TextField, FormControl, InputLabel, Slider, IconButton\r\n} from \"@mui/material\";\r\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\r\nimport Brightness4Icon from \"@mui/icons-material/Brightness4\";\r\nimport Brightness7Icon from \"@mui/icons-material/Brightness7\";\r\nimport Papa from \"papaparse\";\r\nimport JSZip from \"jszip\";\r\nimport { saveAs } from \"file-saver\";\r\n\r\nconst behaviors = [\"jumping\", \"unsupported rearing\", \"supported rearing\", \"grooming\", \"freezing\", \"etc\"];\r\nconst rowsPerPage = 15;\r\n\r\nfunction App() {\r\n  const [intervals, setIntervals] = useState([]);\r\n  const [intervalStartFrame, setIntervalStartFrame] = useState(\"\");\r\n  const [intervalEndFrame, setIntervalEndFrame] = useState(\"\");\r\n  const [intervalBehavior, setIntervalBehavior] = useState(behaviors[0]);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [isConverting, setIsConverting] = useState(false);\r\n  const [page, setPage] = useState(0);\r\n  const [frameRate, setFrameRate] = useState(30); // Default FPS set to 30\r\n  const [frameInterval, setFrameInterval] = useState(100); // Frame transition interval in ms\r\n  const [videoUrl, setVideoUrl] = useState(null);\r\n  const [videoDuration, setVideoDuration] = useState(0);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [currentFrame, setCurrentFrame] = useState(0);\r\n  const currentFrameRef = useRef(0);\r\n  const [markStart, setMarkStart] = useState(null);\r\n  const [isAddingInterval, setIsAddingInterval] = useState(false);\r\n  const [themeMode, setThemeMode] = useState(\"light\");\r\n  const [arrowPressed, setArrowPressed] = useState(null);\r\n  const [zoom, setZoom] = useState(1);\r\n  const [panX, setPanX] = useState(0);\r\n  const [panY, setPanY] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n\r\n  const videoRef = useRef(null);\r\n  const frameIntervalRef = useRef(null);\r\n  const videoContainerRef = useRef(null);\r\n\r\n  const theme = createTheme({\r\n    palette: {\r\n      mode: themeMode,\r\n      ...(themeMode === \"dark\" ? {\r\n        background: { default: \"#121212\", paper: \"#1e1e1e\" },\r\n        text: { primary: \"#d2d2d2ff\" },\r\n        primary: { main: \"#e7657cff\" },\r\n      } : {\r\n        background: { default: \"#ffffff\", paper: \"#ffffff\" },\r\n        text: { primary: \"#000000\" },\r\n        primary: { main: \"#e7657cff\" },\r\n      }),\r\n    },\r\n  });\r\n\r\n  const toggleTheme = () => {\r\n    setThemeMode(prev => (prev === \"light\" ? \"dark\" : \"light\"));\r\n  };\r\n\r\n  async function onFileChange(e) {\r\n    const files = Array.from(e.target.files);\r\n    if (files.length === 0) {\r\n      alert(\"Please select a video.\");\r\n      return;\r\n    }\r\n    setIsUploading(true);\r\n    setIsConverting(true);\r\n\r\n    const file = files[0];\r\n    if (!file.type.startsWith(\"video/\")) {\r\n      alert(\"Only video files can be uploaded.\");\r\n      setIsUploading(false);\r\n      setIsConverting(false);\r\n      return;\r\n    }\r\n    console.log(\"Video file uploaded:\", file.name, \"Type:\", file.type);\r\n\r\n    const fd = new FormData();\r\n    fd.append(\"video\", file);\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/process-video\", {\r\n        method: \"POST\",\r\n        body: fd,\r\n      }).then(res => res.json());\r\n      if (res.status === \"error\") {\r\n        alert(`Video processing failed: ${res.msg}`);\r\n        setIsUploading(false);\r\n        setIsConverting(false);\r\n        return;\r\n      }\r\n      setVideoUrl(res.converted_url);\r\n      setCurrentTime(0);\r\n      setCurrentFrame(0);\r\n      currentFrameRef.current = 0;\r\n      setIntervals([]);\r\n      setMarkStart(null);\r\n      setIntervalStartFrame(\"\");\r\n      setIntervalEndFrame(\"\");\r\n      setPage(0);\r\n    } catch (error) {\r\n      alert(`Video processing failed: ${error.message}`);\r\n      setIsUploading(false);\r\n      setIsConverting(false);\r\n    }\r\n    setIsUploading(false);\r\n    setIsConverting(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (videoUrl && videoRef.current) {\r\n      console.log(\"Setting video src:\", videoUrl);\r\n      videoRef.current.src = videoUrl;\r\n      videoRef.current.load();\r\n      videoRef.current.onloadedmetadata = () => {\r\n        console.log(\"Video metadata loaded, duration:\", videoRef.current.duration);\r\n        setVideoDuration(videoRef.current.duration);\r\n      };\r\n      videoRef.current.onerror = (e) => {\r\n        console.error(\"Video error:\", e);\r\n        alert(\"Video playback failed: Please check the converted MP4 file.\");\r\n      };\r\n    }\r\n    return () => {\r\n      if (videoRef.current) {\r\n        console.log(\"Cleaning up videoRef\");\r\n        videoRef.current.onloadedmetadata = null;\r\n        videoRef.current.onerror = null;\r\n      }\r\n    };\r\n  }, [videoUrl]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      e.preventDefault();\r\n      if (isAddingInterval) return;\r\n      if (e.code === \"KeyS\") {\r\n        markIntervalStart();\r\n      } else if (e.code === \"KeyE\") {\r\n        markIntervalEnd();\r\n      } else if ([\"Digit1\", \"Digit2\", \"Digit3\", \"Digit4\", \"Digit5\", \"Digit6\"].includes(e.code)) {\r\n        const behaviorIndex = parseInt(e.code.replace(\"Digit\", \"\")) - 1;\r\n        if (behaviorIndex < behaviors.length && markStart !== null && intervalEndFrame !== \"\") {\r\n          setIsAddingInterval(true);\r\n          const selectedBehavior = behaviors[behaviorIndex];\r\n          console.log(`Behavior selected and interval added: ${selectedBehavior}`);\r\n          setIntervalBehavior(selectedBehavior);\r\n          addInterval(selectedBehavior);\r\n        }\r\n      } else if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\r\n        setArrowPressed(e.code);\r\n      }\r\n    };\r\n\r\n    const handleKeyUp = (e) => {\r\n      if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\r\n        setArrowPressed(null);\r\n        if (markStart !== null) {\r\n          markIntervalEnd();\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    window.addEventListener(\"keyup\", handleKeyUp);\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handleKeyDown);\r\n      window.removeEventListener(\"keyup\", handleKeyUp);\r\n    };\r\n  }, [markStart, intervalEndFrame, isAddingInterval]);\r\n\r\n  useEffect(() => {\r\n    currentFrameRef.current = currentFrame;\r\n  }, [currentFrame]);\r\n\r\n  useEffect(() => {\r\n    if (arrowPressed) {\r\n      const moveFrame = () => {\r\n        if (!videoRef.current) return;\r\n        const direction = arrowPressed === \"ArrowRight\" ? 1 : -1;\r\n        const newFrame = currentFrameRef.current + direction;\r\n        const newTime = newFrame / frameRate;\r\n        if (newTime >= 0 && newTime <= videoDuration) {\r\n          setCurrentTime(newTime);\r\n          setCurrentFrame(newFrame);\r\n          currentFrameRef.current = newFrame;\r\n          videoRef.current.currentTime = newTime;\r\n          console.log(`Moved to frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\r\n        }\r\n        frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\r\n      };\r\n      frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\r\n    } else {\r\n      if (frameIntervalRef.current) {\r\n        clearTimeout(frameIntervalRef.current);\r\n        frameIntervalRef.current = null;\r\n      }\r\n    }\r\n    return () => {\r\n      if (frameIntervalRef.current) {\r\n        clearTimeout(frameIntervalRef.current);\r\n      }\r\n    };\r\n  }, [arrowPressed, frameRate, videoDuration, frameInterval]);\r\n\r\n  useEffect(() => {\r\n    if (isAddingInterval) {\r\n      setIsAddingInterval(false);\r\n    }\r\n  }, [intervals]);\r\n\r\n  function handleTimeUpdate() {\r\n    if (!videoRef.current) return;\r\n    const time = videoRef.current.currentTime;\r\n    setCurrentTime(time);\r\n    const newFrame = Math.round(time * frameRate);\r\n    setCurrentFrame(newFrame);\r\n    currentFrameRef.current = newFrame;\r\n  }\r\n\r\n  function handleSliderChange(event, newValue) {\r\n    const newTime = newValue / frameRate;\r\n    setCurrentTime(newTime);\r\n    setCurrentFrame(newValue);\r\n    currentFrameRef.current = newValue;\r\n    if (videoRef.current) {\r\n      console.log(\"Slider changed, setting video frame:\", newValue);\r\n      videoRef.current.currentTime = newTime;\r\n    }\r\n  }\r\n\r\n  function moveNextFrame() {\r\n    const newFrame = currentFrame + 1;\r\n    const newTime = newFrame / frameRate;\r\n    if (newTime <= videoDuration) {\r\n      setCurrentTime(newTime);\r\n      setCurrentFrame(newFrame);\r\n      currentFrameRef.current = newFrame;\r\n      if (videoRef.current) {\r\n        videoRef.current.currentTime = newTime;\r\n        console.log(`Next frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\r\n      }\r\n    }\r\n  }\r\n\r\n  function movePrevFrame() {\r\n    const newFrame = currentFrame - 1;\r\n    const newTime = newFrame / frameRate;\r\n    if (newTime >= 0) {\r\n      setCurrentTime(newTime);\r\n      setCurrentFrame(newFrame);\r\n      currentFrameRef.current = newFrame;\r\n      if (videoRef.current) {\r\n        videoRef.current.currentTime = newTime;\r\n        console.log(`Previous frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Zoom functions\r\n  function zoomIn() {\r\n    setZoom(prev => Math.min(prev * 1.5, 5)); // Max zoom 5x\r\n  }\r\n\r\n  function zoomOut() {\r\n    setZoom(prev => Math.max(prev / 1.5, 0.5)); // Min zoom 0.5x\r\n  }\r\n\r\n  function resetZoom() {\r\n    setZoom(1);\r\n    setPanX(0);\r\n    setPanY(0);\r\n  }\r\n\r\n  function handleWheel(e) {\r\n    e.preventDefault();\r\n    const delta = e.deltaY > 0 ? 0.9 : 1.1;\r\n    setZoom(prev => Math.min(Math.max(prev * delta, 0.5), 5));\r\n  }\r\n\r\n  function handleMouseDown(e) {\r\n    setIsDragging(true);\r\n    setDragStart({ x: e.clientX - panX, y: e.clientY - panY });\r\n  }\r\n\r\n  function handleMouseMove(e) {\r\n    if (!isDragging) return;\r\n    setPanX(e.clientX - dragStart.x);\r\n    setPanY(e.clientY - dragStart.y);\r\n  }\r\n\r\n  function handleMouseUp() {\r\n    setIsDragging(false);\r\n  }\r\n\r\n  function markIntervalStart() {\r\n    setMarkStart(currentFrameRef.current);\r\n    setIntervalStartFrame(currentFrameRef.current);\r\n    setIntervalEndFrame(\"\");\r\n    console.log(\"Interval start marked:\", currentFrameRef.current);\r\n  }\r\n\r\n  function markIntervalEnd() {\r\n    if (markStart === null) {\r\n      alert(\"Please mark the start frame first.\");\r\n      return;\r\n    }\r\n    setIntervalEndFrame(currentFrameRef.current);\r\n    console.log(\"Interval end updated:\", currentFrameRef.current);\r\n  }\r\n\r\n  function addInterval(behavior) {\r\n    const startFrame = parseInt(intervalStartFrame);\r\n    const endFrame = parseInt(intervalEndFrame);\r\n    const startTime = startFrame / frameRate;\r\n    const endTime = endFrame / frameRate;\r\n    const maxFrame = Math.round(videoDuration * frameRate);\r\n    if (isNaN(startFrame) || isNaN(endFrame)) {\r\n      alert(\"Start and end frames must be valid numbers.\");\r\n      setIsAddingInterval(false);\r\n      return;\r\n    }\r\n    if (startFrame < 0 || endFrame > maxFrame) {\r\n      alert(`Frames must be between 0 and ${maxFrame}.`);\r\n      setIsAddingInterval(false);\r\n      return;\r\n    }\r\n    if (startFrame >= endFrame) {\r\n      alert(\"Start frame must be less than end frame.\");\r\n      setIsAddingInterval(false);\r\n      return;\r\n    }\r\n    setIntervals(prev => [\r\n      ...prev,\r\n      { start: startFrame, end: endFrame, startTime, endTime, behavior, auto: false },\r\n    ]);\r\n    setIntervalStartFrame(\"\");\r\n    setIntervalEndFrame(\"\");\r\n    setIntervalBehavior(behaviors[0]);\r\n    setMarkStart(null);\r\n    setPage(0);\r\n    console.log(\"Interval added:\", { start: startFrame, end: endFrame, startTime, endTime, behavior });\r\n  }\r\n\r\n  function updateIntervalBehavior(idx, newBehavior) {\r\n    setIntervals(prev =>\r\n      prev.map((interval, i) =>\r\n        i === idx ? { ...interval, behavior: newBehavior } : interval\r\n      )\r\n    );\r\n    console.log(\"Interval behavior updated:\", { idx, behavior: newBehavior });\r\n  }\r\n\r\n  function removeInterval(idx) {\r\n    setIntervals(intervals.filter((_, i) => i !== idx));\r\n    if (page * rowsPerPage >= intervals.length - 1) {\r\n      setPage(Math.max(0, page - 1));\r\n    }\r\n  }\r\n\r\n  function downloadCsvAll() {\r\n    const zip = new JSZip();\r\n    const intervalData = intervals.map(i => ({\r\n      type: \"interval\",\r\n      start_time: i.startTime.toFixed(2),\r\n      end_time: i.endTime.toFixed(2),\r\n      start_frame: i.start,\r\n      end_frame: i.end,\r\n      behavior: i.behavior,\r\n    }));\r\n    const intervalCsv = Papa.unparse(intervalData);\r\n    zip.file(\"interval_summary.csv\", intervalCsv);\r\n    zip.generateAsync({ type: \"blob\" }).then(blob => {\r\n      saveAs(blob, \"behavior_labels.zip\");\r\n    });\r\n  }\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Box sx={{ p: 2, bgcolor: 'background.default', color: 'text.primary' }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n          <Typography variant=\"h4\" gutterBottom>Behavior Labeling Tool</Typography>\r\n          <IconButton onClick={toggleTheme} color=\"inherit\" aria-label=\"Toggle theme\">\r\n            {themeMode === \"light\" ? <Brightness4Icon /> : <Brightness7Icon />}\r\n          </IconButton>\r\n        </Box>\r\n        <Box sx={{ my: 2, display: 'flex', gap: 2, alignItems: 'center' }}>\r\n          <Box>\r\n            <Typography variant=\"body2\" gutterBottom>Select Video</Typography>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"video/*\"\r\n              onChange={onFileChange}\r\n              disabled={isConverting}\r\n              aria-label=\"Select video file\"\r\n            />\r\n            {isConverting && (\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mt: 1 }}>\r\n                <CircularProgress size={20} />\r\n                <Typography variant=\"body2\">Converting video...</Typography>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n          <TextField\r\n            label=\"Frame Rate (FPS)\"\r\n            type=\"number\"\r\n            value={frameRate}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              console.log(\"Frame Rate input:\", value);\r\n              if (value === \"\") {\r\n                setFrameRate(\"\");\r\n              } else {\r\n                const numValue = parseFloat(value);\r\n                if (!isNaN(numValue) && numValue >= 1) {\r\n                  setFrameRate(value);\r\n                }\r\n              }\r\n            }}\r\n            onBlur={() => {\r\n              let numValue = parseFloat(frameRate);\r\n              if (isNaN(numValue) || numValue < 1) {\r\n                console.log(\"Frame Rate reset to default: 30\");\r\n                setFrameRate(30);\r\n              } else {\r\n                setFrameRate(numValue);\r\n              }\r\n            }}\r\n            size=\"small\"\r\n            inputProps={{ min: 1, step: 1 }}\r\n            aria-label=\"Frame rate\"\r\n          />\r\n          <TextField\r\n            label=\"Frame Interval (ms)\"\r\n            type=\"number\"\r\n            value={frameInterval}\r\n            onChange={(e) => {\r\n              const value = e.target.value;\r\n              console.log(\"Frame Interval input:\", value);\r\n              if (value === \"\") {\r\n                setFrameInterval(\"\");\r\n              } else {\r\n                const numValue = parseInt(value);\r\n                if (!isNaN(numValue) && numValue >= 10) {\r\n                  setFrameInterval(value);\r\n                }\r\n              }\r\n            }}\r\n            onBlur={() => {\r\n              let numValue = parseInt(frameInterval);\r\n              if (isNaN(numValue) || numValue < 10) {\r\n                console.log(\"Frame Interval reset to default: 100\");\r\n                setFrameInterval(100);\r\n              } else {\r\n                setFrameInterval(numValue);\r\n              }\r\n            }}\r\n            size=\"small\"\r\n            inputProps={{ min: 10, step: 1 }}\r\n            aria-label=\"Frame transition interval\"\r\n          />\r\n          <Button\r\n            onClick={downloadCsvAll}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            aria-label=\"Save CSV\"\r\n          >\r\n            Save CSV\r\n          </Button>\r\n        </Box>\r\n\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={6}>\r\n            <Typography variant=\"h6\">Video</Typography>\r\n            {!videoUrl ? (\r\n              <Box\r\n                sx={{\r\n                  width: \"100%\",\r\n                  maxWidth: \"800px\",\r\n                  height: \"450px\",\r\n                  backgroundColor: themeMode === \"dark\" ? \"#333\" : \"#e0e0e0\",\r\n                  border: \"1px solid #ccc\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  color: themeMode === \"dark\" ? \"#bbb\" : \"#666\",\r\n                  fontSize: \"1.2rem\",\r\n                  borderRadius: \"4px\",\r\n                }}\r\n                aria-label=\"Video placeholder\"\r\n              >\r\n                Please upload a video\r\n              </Box>\r\n            ) : (\r\n              <video\r\n                ref={videoRef}\r\n                width=\"100%\"\r\n                style={{ maxWidth: \"800px\", border: \"1px solid #ccc\", borderRadius: \"4px\" }}\r\n                onTimeUpdate={handleTimeUpdate}\r\n              />\r\n            )}\r\n            {videoUrl && (\r\n              <>\r\n                <Box sx={{ display: 'flex', gap: 2, mt: 1, alignItems: 'center' }}>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    onClick={movePrevFrame}\r\n                    aria-label=\"Previous frame\"\r\n                  >\r\n                    Prev Frame\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    onClick={moveNextFrame}\r\n                    aria-label=\"Next frame\"\r\n                  >\r\n                    Next Frame\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    onClick={markIntervalStart}\r\n                    aria-label=\"Mark start frame\"\r\n                  >\r\n                    Mark Start (S)\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    onClick={markIntervalEnd}\r\n                    aria-label=\"Mark end frame\"\r\n                  >\r\n                    Mark End (E)\r\n                  </Button>\r\n                  <Typography>\r\n                    Current Frame: {currentFrame} / {Math.round(videoDuration * frameRate)}\r\n                  </Typography>\r\n                </Box>\r\n                <Slider\r\n                  value={currentFrame}\r\n                  min={0}\r\n                  max={Math.round(videoDuration * frameRate)}\r\n                  step={1}\r\n                  onChange={handleSliderChange}\r\n                  aria-label=\"Video frame timeline\"\r\n                  sx={{ mt: 2 }}\r\n                />\r\n              </>\r\n            )}\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Box sx={{ p: 2, border: '1px solid #ccc', borderRadius: 1, bgcolor: 'background.paper', height: '100%' }}>\r\n              <Typography variant=\"h6\" gutterBottom>Behavior Intervals</Typography>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                Shortcuts: ArrowRight/ArrowLeft to navigate and mark end, S to mark start, E to update end, 1-6 to select behavior and add interval\r\n              </Typography>\r\n              <Box sx={{ display: 'flex', gap: 2, alignItems: 'center', mb: 2 }}>\r\n                <TextField\r\n                  label=\"Start Frame\"\r\n                  type=\"number\"\r\n                  value={intervalStartFrame}\r\n                  onChange={(e) => {\r\n                    const v = e.target.value;\r\n                    console.log(\"Start Frame input:\", v);\r\n                    setIntervalStartFrame(v);\r\n                    if (v !== \"\") setMarkStart(Number(v));\r\n                    else setMarkStart(null);\r\n                  }}\r\n                  size=\"small\"\r\n                  inputProps={{ min: 0, step: 1 }}\r\n                  aria-label=\"Interval start frame\"\r\n                />\r\n                <TextField\r\n                  label=\"End Frame\"\r\n                  type=\"number\"\r\n                  value={intervalStartFrame !== \"\" ? intervalEndFrame : \"\"}\r\n                  onChange={(e) => {\r\n                    const v = e.target.value;\r\n                    console.log(\"End Frame input:\", v);\r\n                    setIntervalEndFrame(v);\r\n                  }}\r\n                  size=\"small\"\r\n                  inputProps={{ min: intervalStartFrame !== \"\" ? Number(intervalStartFrame) : 0, step: 1 }}\r\n                  aria-label=\"Interval end frame\"\r\n                  disabled={intervalStartFrame === \"\"}\r\n                />\r\n                <FormControl size=\"small\" sx={{ minWidth: 200 }}>\r\n                  <InputLabel>Behavior</InputLabel>\r\n                  <Select\r\n                    value={intervalBehavior}\r\n                    label=\"Behavior\"\r\n                    onChange={(e) => setIntervalBehavior(e.target.value)}\r\n                  >\r\n                    {behaviors.map((b, i) => (\r\n                      <MenuItem key={b} value={b}>{`${b} (${i + 1})`}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n                <Button\r\n                  onClick={() => addInterval(intervalBehavior)}\r\n                  variant=\"contained\"\r\n                  aria-label=\"Add interval\"\r\n                  disabled={intervalStartFrame === \"\" || intervalEndFrame === \"\"}\r\n                >\r\n                  Add\r\n                </Button>\r\n              </Box>\r\n              <Table size=\"small\">\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Interval (Frame)</TableCell>\r\n                    <TableCell>Behavior</TableCell>\r\n                    <TableCell>Delete</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {intervals.length === 0 ? (\r\n                    <TableRow>\r\n                      <TableCell colSpan={3} align=\"center\">\r\n                        No intervals added yet.\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ) : (\r\n                    intervals\r\n                      .slice()\r\n                      .sort((a, b) => b.start - a.start)\r\n                      .slice(page * rowsPerPage, (page + 1) * rowsPerPage)\r\n                      .map((interval, i) => (\r\n                        <TableRow key={i}>\r\n                          <TableCell>{`${interval.start} - ${interval.end}`}</TableCell>\r\n                          <TableCell>\r\n                            <FormControl size=\"small\" sx={{ minWidth: 200 }}>\r\n                              <InputLabel>Behavior</InputLabel>\r\n                              <Select\r\n                                value={interval.behavior}\r\n                                label=\"Behavior\"\r\n                                onChange={(e) => updateIntervalBehavior(intervals.indexOf(interval), e.target.value)}\r\n                              >\r\n                                {behaviors.map((b, j) => (\r\n                                  <MenuItem key={b} value={b}>{`${b} (${j + 1})`}</MenuItem>\r\n                                ))}\r\n                              </Select>\r\n                            </FormControl>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Button\r\n                              variant=\"outlined\"\r\n                              color=\"error\"\r\n                              size=\"small\"\r\n                              onClick={() => removeInterval(intervals.indexOf(interval))}\r\n                              aria-label={`Delete interval ${i + 1}`}\r\n                            >\r\n                              Delete\r\n                            </Button>\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n              {intervals.length > rowsPerPage && (\r\n                <Box sx={{ mt: 2, display: 'flex', gap: 2 }}>\r\n                  <Button\r\n                    onClick={() => setPage(p => Math.max(0, p - 1))}\r\n                    disabled={page === 0}\r\n                    variant=\"outlined\"\r\n                    aria-label=\"Previous page\"\r\n                  >\r\n                    Previous\r\n                  </Button>\r\n                  <Button\r\n                    onClick={() => setPage(p => p + 1)}\r\n                    disabled={(page + 1) * rowsPerPage >= intervals.length}\r\n                    variant=\"outlined\"\r\n                    aria-label=\"Next page\"\r\n                  >\r\n                    Next\r\n                  </Button>\r\n                  <Typography>\r\n                    Page {page + 1} / {Math.ceil(intervals.length / rowsPerPage)}\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SACEC,MAAM,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,UAAU,EAAEC,IAAI,EAC/CC,KAAK,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,EAAEC,gBAAgB,EAClEC,SAAS,EAAEC,WAAW,EAAEC,UAAU,EAAEC,MAAM,EAAEC,UAAU,QACjD,eAAe;AACtB,SAASC,aAAa,EAAEC,WAAW,QAAQ,sBAAsB;AACjE,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,eAAe,MAAM,iCAAiC;AAC7D,OAAOC,IAAI,MAAM,WAAW;AAC5B,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,MAAM,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEpC,MAAMC,SAAS,GAAG,CAAC,SAAS,EAAE,qBAAqB,EAAE,mBAAmB,EAAE,UAAU,EAAE,UAAU,EAAE,KAAK,CAAC;AACxG,MAAMC,WAAW,GAAG,EAAE;AAEtB,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACoC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGrC,QAAQ,CAAC,EAAE,CAAC;EAChE,MAAM,CAACsC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGvC,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACwC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGzC,QAAQ,CAAC8B,SAAS,CAAC,CAAC,CAAC,CAAC;EACtE,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAG3C,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC4C,YAAY,EAAEC,eAAe,CAAC,GAAG7C,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAAC8C,IAAI,EAAEC,OAAO,CAAC,GAAG/C,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACgD,SAAS,EAAEC,YAAY,CAAC,GAAGjD,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAChD,MAAM,CAACkD,aAAa,EAAEC,gBAAgB,CAAC,GAAGnD,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;EACzD,MAAM,CAACoD,QAAQ,EAAEC,WAAW,CAAC,GAAGrD,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACsD,aAAa,EAAEC,gBAAgB,CAAC,GAAGvD,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAACwD,WAAW,EAAEC,cAAc,CAAC,GAAGzD,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAAC0D,YAAY,EAAEC,eAAe,CAAC,GAAG3D,QAAQ,CAAC,CAAC,CAAC;EACnD,MAAM4D,eAAe,GAAG7D,MAAM,CAAC,CAAC,CAAC;EACjC,MAAM,CAAC8D,SAAS,EAAEC,YAAY,CAAC,GAAG9D,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAAC+D,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGhE,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACiE,SAAS,EAAEC,YAAY,CAAC,GAAGlE,QAAQ,CAAC,OAAO,CAAC;EACnD,MAAM,CAACmE,YAAY,EAAEC,eAAe,CAAC,GAAGpE,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACqE,IAAI,EAAEC,OAAO,CAAC,GAAGtE,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACuE,IAAI,EAAEC,OAAO,CAAC,GAAGxE,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACyE,IAAI,EAAEC,OAAO,CAAC,GAAG1E,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAAC2E,UAAU,EAAEC,aAAa,CAAC,GAAG5E,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC6E,SAAS,EAAEC,YAAY,CAAC,GAAG9E,QAAQ,CAAC;IAAE+E,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAE1D,MAAMC,QAAQ,GAAGlF,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMmF,gBAAgB,GAAGnF,MAAM,CAAC,IAAI,CAAC;EACrC,MAAMoF,iBAAiB,GAAGpF,MAAM,CAAC,IAAI,CAAC;EAEtC,MAAMqF,KAAK,GAAGhE,WAAW,CAAC;IACxBiE,OAAO,EAAE;MACPC,IAAI,EAAErB,SAAS;MACf,IAAIA,SAAS,KAAK,MAAM,GAAG;QACzBsB,UAAU,EAAE;UAAEC,OAAO,EAAE,SAAS;UAAEC,KAAK,EAAE;QAAU,CAAC;QACpDC,IAAI,EAAE;UAAEC,OAAO,EAAE;QAAY,CAAC;QAC9BA,OAAO,EAAE;UAAEC,IAAI,EAAE;QAAY;MAC/B,CAAC,GAAG;QACFL,UAAU,EAAE;UAAEC,OAAO,EAAE,SAAS;UAAEC,KAAK,EAAE;QAAU,CAAC;QACpDC,IAAI,EAAE;UAAEC,OAAO,EAAE;QAAU,CAAC;QAC5BA,OAAO,EAAE;UAAEC,IAAI,EAAE;QAAY;MAC/B,CAAC;IACH;EACF,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxB3B,YAAY,CAAC4B,IAAI,IAAKA,IAAI,KAAK,OAAO,GAAG,MAAM,GAAG,OAAQ,CAAC;EAC7D,CAAC;EAED,eAAeC,YAAYA,CAACC,CAAC,EAAE;IAC7B,MAAMC,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACH,CAAC,CAACI,MAAM,CAACH,KAAK,CAAC;IACxC,IAAIA,KAAK,CAACI,MAAM,KAAK,CAAC,EAAE;MACtBC,KAAK,CAAC,wBAAwB,CAAC;MAC/B;IACF;IACA3D,cAAc,CAAC,IAAI,CAAC;IACpBE,eAAe,CAAC,IAAI,CAAC;IAErB,MAAM0D,IAAI,GAAGN,KAAK,CAAC,CAAC,CAAC;IACrB,IAAI,CAACM,IAAI,CAACC,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,EAAE;MACnCH,KAAK,CAAC,mCAAmC,CAAC;MAC1C3D,cAAc,CAAC,KAAK,CAAC;MACrBE,eAAe,CAAC,KAAK,CAAC;MACtB;IACF;IACA6D,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEJ,IAAI,CAACK,IAAI,EAAE,OAAO,EAAEL,IAAI,CAACC,IAAI,CAAC;IAElE,MAAMK,EAAE,GAAG,IAAIC,QAAQ,CAAC,CAAC;IACzBD,EAAE,CAACE,MAAM,CAAC,OAAO,EAAER,IAAI,CAAC;IACxB,IAAI;MACF,MAAMS,GAAG,GAAG,MAAMC,KAAK,CAAC,qCAAqC,EAAE;QAC7DC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEN;MACR,CAAC,CAAC,CAACO,IAAI,CAACJ,GAAG,IAAIA,GAAG,CAACK,IAAI,CAAC,CAAC,CAAC;MAC1B,IAAIL,GAAG,CAACM,MAAM,KAAK,OAAO,EAAE;QAC1BhB,KAAK,CAAC,4BAA4BU,GAAG,CAACO,GAAG,EAAE,CAAC;QAC5C5E,cAAc,CAAC,KAAK,CAAC;QACrBE,eAAe,CAAC,KAAK,CAAC;QACtB;MACF;MACAQ,WAAW,CAAC2D,GAAG,CAACQ,aAAa,CAAC;MAC9B/D,cAAc,CAAC,CAAC,CAAC;MACjBE,eAAe,CAAC,CAAC,CAAC;MAClBC,eAAe,CAAC6D,OAAO,GAAG,CAAC;MAC3BtF,YAAY,CAAC,EAAE,CAAC;MAChB2B,YAAY,CAAC,IAAI,CAAC;MAClBzB,qBAAqB,CAAC,EAAE,CAAC;MACzBE,mBAAmB,CAAC,EAAE,CAAC;MACvBQ,OAAO,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,OAAO2E,KAAK,EAAE;MACdpB,KAAK,CAAC,4BAA4BoB,KAAK,CAACC,OAAO,EAAE,CAAC;MAClDhF,cAAc,CAAC,KAAK,CAAC;MACrBE,eAAe,CAAC,KAAK,CAAC;IACxB;IACAF,cAAc,CAAC,KAAK,CAAC;IACrBE,eAAe,CAAC,KAAK,CAAC;EACxB;EAEA5C,SAAS,CAAC,MAAM;IACd,IAAImD,QAAQ,IAAI6B,QAAQ,CAACwC,OAAO,EAAE;MAChCf,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEvD,QAAQ,CAAC;MAC3C6B,QAAQ,CAACwC,OAAO,CAACG,GAAG,GAAGxE,QAAQ;MAC/B6B,QAAQ,CAACwC,OAAO,CAACI,IAAI,CAAC,CAAC;MACvB5C,QAAQ,CAACwC,OAAO,CAACK,gBAAgB,GAAG,MAAM;QACxCpB,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAE1B,QAAQ,CAACwC,OAAO,CAACM,QAAQ,CAAC;QAC1ExE,gBAAgB,CAAC0B,QAAQ,CAACwC,OAAO,CAACM,QAAQ,CAAC;MAC7C,CAAC;MACD9C,QAAQ,CAACwC,OAAO,CAACO,OAAO,GAAIhC,CAAC,IAAK;QAChCU,OAAO,CAACgB,KAAK,CAAC,cAAc,EAAE1B,CAAC,CAAC;QAChCM,KAAK,CAAC,6DAA6D,CAAC;MACtE,CAAC;IACH;IACA,OAAO,MAAM;MACX,IAAIrB,QAAQ,CAACwC,OAAO,EAAE;QACpBf,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;QACnC1B,QAAQ,CAACwC,OAAO,CAACK,gBAAgB,GAAG,IAAI;QACxC7C,QAAQ,CAACwC,OAAO,CAACO,OAAO,GAAG,IAAI;MACjC;IACF,CAAC;EACH,CAAC,EAAE,CAAC5E,QAAQ,CAAC,CAAC;EAEdnD,SAAS,CAAC,MAAM;IACd,MAAMgI,aAAa,GAAIjC,CAAC,IAAK;MAC3BA,CAAC,CAACkC,cAAc,CAAC,CAAC;MAClB,IAAInE,gBAAgB,EAAE;MACtB,IAAIiC,CAAC,CAACmC,IAAI,KAAK,MAAM,EAAE;QACrBC,iBAAiB,CAAC,CAAC;MACrB,CAAC,MAAM,IAAIpC,CAAC,CAACmC,IAAI,KAAK,MAAM,EAAE;QAC5BE,eAAe,CAAC,CAAC;MACnB,CAAC,MAAM,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAACC,QAAQ,CAACtC,CAAC,CAACmC,IAAI,CAAC,EAAE;QACxF,MAAMI,aAAa,GAAGC,QAAQ,CAACxC,CAAC,CAACmC,IAAI,CAACM,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC;QAC/D,IAAIF,aAAa,GAAGzG,SAAS,CAACuE,MAAM,IAAIxC,SAAS,KAAK,IAAI,IAAIvB,gBAAgB,KAAK,EAAE,EAAE;UACrF0B,mBAAmB,CAAC,IAAI,CAAC;UACzB,MAAM0E,gBAAgB,GAAG5G,SAAS,CAACyG,aAAa,CAAC;UACjD7B,OAAO,CAACC,GAAG,CAAC,yCAAyC+B,gBAAgB,EAAE,CAAC;UACxEjG,mBAAmB,CAACiG,gBAAgB,CAAC;UACrCC,WAAW,CAACD,gBAAgB,CAAC;QAC/B;MACF,CAAC,MAAM,IAAI1C,CAAC,CAACmC,IAAI,KAAK,YAAY,IAAInC,CAAC,CAACmC,IAAI,KAAK,WAAW,EAAE;QAC5D/D,eAAe,CAAC4B,CAAC,CAACmC,IAAI,CAAC;MACzB;IACF,CAAC;IAED,MAAMS,WAAW,GAAI5C,CAAC,IAAK;MACzB,IAAIA,CAAC,CAACmC,IAAI,KAAK,YAAY,IAAInC,CAAC,CAACmC,IAAI,KAAK,WAAW,EAAE;QACrD/D,eAAe,CAAC,IAAI,CAAC;QACrB,IAAIP,SAAS,KAAK,IAAI,EAAE;UACtBwE,eAAe,CAAC,CAAC;QACnB;MACF;IACF,CAAC;IAEDQ,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAEb,aAAa,CAAC;IACjDY,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAEF,WAAW,CAAC;IAC7C,OAAO,MAAM;MACXC,MAAM,CAACE,mBAAmB,CAAC,SAAS,EAAEd,aAAa,CAAC;MACpDY,MAAM,CAACE,mBAAmB,CAAC,OAAO,EAAEH,WAAW,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,CAAC/E,SAAS,EAAEvB,gBAAgB,EAAEyB,gBAAgB,CAAC,CAAC;EAEnD9D,SAAS,CAAC,MAAM;IACd2D,eAAe,CAAC6D,OAAO,GAAG/D,YAAY;EACxC,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;EAElBzD,SAAS,CAAC,MAAM;IACd,IAAIkE,YAAY,EAAE;MAChB,MAAM6E,SAAS,GAAGA,CAAA,KAAM;QACtB,IAAI,CAAC/D,QAAQ,CAACwC,OAAO,EAAE;QACvB,MAAMwB,SAAS,GAAG9E,YAAY,KAAK,YAAY,GAAG,CAAC,GAAG,CAAC,CAAC;QACxD,MAAM+E,QAAQ,GAAGtF,eAAe,CAAC6D,OAAO,GAAGwB,SAAS;QACpD,MAAME,OAAO,GAAGD,QAAQ,GAAGlG,SAAS;QACpC,IAAImG,OAAO,IAAI,CAAC,IAAIA,OAAO,IAAI7F,aAAa,EAAE;UAC5CG,cAAc,CAAC0F,OAAO,CAAC;UACvBxF,eAAe,CAACuF,QAAQ,CAAC;UACzBtF,eAAe,CAAC6D,OAAO,GAAGyB,QAAQ;UAClCjE,QAAQ,CAACwC,OAAO,CAACjE,WAAW,GAAG2F,OAAO;UACtCzC,OAAO,CAACC,GAAG,CAAC,mBAAmBuC,QAAQ,WAAWC,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;QAC1E;QACAlE,gBAAgB,CAACuC,OAAO,GAAG4B,UAAU,CAACL,SAAS,EAAE9F,aAAa,CAAC;MACjE,CAAC;MACDgC,gBAAgB,CAACuC,OAAO,GAAG4B,UAAU,CAACL,SAAS,EAAE9F,aAAa,CAAC;IACjE,CAAC,MAAM;MACL,IAAIgC,gBAAgB,CAACuC,OAAO,EAAE;QAC5B6B,YAAY,CAACpE,gBAAgB,CAACuC,OAAO,CAAC;QACtCvC,gBAAgB,CAACuC,OAAO,GAAG,IAAI;MACjC;IACF;IACA,OAAO,MAAM;MACX,IAAIvC,gBAAgB,CAACuC,OAAO,EAAE;QAC5B6B,YAAY,CAACpE,gBAAgB,CAACuC,OAAO,CAAC;MACxC;IACF,CAAC;EACH,CAAC,EAAE,CAACtD,YAAY,EAAEnB,SAAS,EAAEM,aAAa,EAAEJ,aAAa,CAAC,CAAC;EAE3DjD,SAAS,CAAC,MAAM;IACd,IAAI8D,gBAAgB,EAAE;MACpBC,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC,EAAE,CAAC9B,SAAS,CAAC,CAAC;EAEf,SAASqH,gBAAgBA,CAAA,EAAG;IAC1B,IAAI,CAACtE,QAAQ,CAACwC,OAAO,EAAE;IACvB,MAAM+B,IAAI,GAAGvE,QAAQ,CAACwC,OAAO,CAACjE,WAAW;IACzCC,cAAc,CAAC+F,IAAI,CAAC;IACpB,MAAMN,QAAQ,GAAGO,IAAI,CAACC,KAAK,CAACF,IAAI,GAAGxG,SAAS,CAAC;IAC7CW,eAAe,CAACuF,QAAQ,CAAC;IACzBtF,eAAe,CAAC6D,OAAO,GAAGyB,QAAQ;EACpC;EAEA,SAASS,kBAAkBA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IAC3C,MAAMV,OAAO,GAAGU,QAAQ,GAAG7G,SAAS;IACpCS,cAAc,CAAC0F,OAAO,CAAC;IACvBxF,eAAe,CAACkG,QAAQ,CAAC;IACzBjG,eAAe,CAAC6D,OAAO,GAAGoC,QAAQ;IAClC,IAAI5E,QAAQ,CAACwC,OAAO,EAAE;MACpBf,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEkD,QAAQ,CAAC;MAC7D5E,QAAQ,CAACwC,OAAO,CAACjE,WAAW,GAAG2F,OAAO;IACxC;EACF;EAEA,SAASW,aAAaA,CAAA,EAAG;IACvB,MAAMZ,QAAQ,GAAGxF,YAAY,GAAG,CAAC;IACjC,MAAMyF,OAAO,GAAGD,QAAQ,GAAGlG,SAAS;IACpC,IAAImG,OAAO,IAAI7F,aAAa,EAAE;MAC5BG,cAAc,CAAC0F,OAAO,CAAC;MACvBxF,eAAe,CAACuF,QAAQ,CAAC;MACzBtF,eAAe,CAAC6D,OAAO,GAAGyB,QAAQ;MAClC,IAAIjE,QAAQ,CAACwC,OAAO,EAAE;QACpBxC,QAAQ,CAACwC,OAAO,CAACjE,WAAW,GAAG2F,OAAO;QACtCzC,OAAO,CAACC,GAAG,CAAC,eAAeuC,QAAQ,WAAWC,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;MACtE;IACF;EACF;EAEA,SAASW,aAAaA,CAAA,EAAG;IACvB,MAAMb,QAAQ,GAAGxF,YAAY,GAAG,CAAC;IACjC,MAAMyF,OAAO,GAAGD,QAAQ,GAAGlG,SAAS;IACpC,IAAImG,OAAO,IAAI,CAAC,EAAE;MAChB1F,cAAc,CAAC0F,OAAO,CAAC;MACvBxF,eAAe,CAACuF,QAAQ,CAAC;MACzBtF,eAAe,CAAC6D,OAAO,GAAGyB,QAAQ;MAClC,IAAIjE,QAAQ,CAACwC,OAAO,EAAE;QACpBxC,QAAQ,CAACwC,OAAO,CAACjE,WAAW,GAAG2F,OAAO;QACtCzC,OAAO,CAACC,GAAG,CAAC,mBAAmBuC,QAAQ,WAAWC,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC;MAC1E;IACF;EACF;;EAEA;EACA,SAASY,MAAMA,CAAA,EAAG;IAChB1F,OAAO,CAACwB,IAAI,IAAI2D,IAAI,CAACQ,GAAG,CAACnE,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAC5C;EAEA,SAASoE,OAAOA,CAAA,EAAG;IACjB5F,OAAO,CAACwB,IAAI,IAAI2D,IAAI,CAACU,GAAG,CAACrE,IAAI,GAAG,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;EAC9C;EAEA,SAASsE,SAASA,CAAA,EAAG;IACnB9F,OAAO,CAAC,CAAC,CAAC;IACVE,OAAO,CAAC,CAAC,CAAC;IACVE,OAAO,CAAC,CAAC,CAAC;EACZ;EAEA,SAAS2F,WAAWA,CAACrE,CAAC,EAAE;IACtBA,CAAC,CAACkC,cAAc,CAAC,CAAC;IAClB,MAAMoC,KAAK,GAAGtE,CAAC,CAACuE,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG;IACtCjG,OAAO,CAACwB,IAAI,IAAI2D,IAAI,CAACQ,GAAG,CAACR,IAAI,CAACU,GAAG,CAACrE,IAAI,GAAGwE,KAAK,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;EAC3D;EAEA,SAASE,eAAeA,CAACxE,CAAC,EAAE;IAC1BpB,aAAa,CAAC,IAAI,CAAC;IACnBE,YAAY,CAAC;MAAEC,CAAC,EAAEiB,CAAC,CAACyE,OAAO,GAAGlG,IAAI;MAAES,CAAC,EAAEgB,CAAC,CAAC0E,OAAO,GAAGjG;IAAK,CAAC,CAAC;EAC5D;EAEA,SAASkG,eAAeA,CAAC3E,CAAC,EAAE;IAC1B,IAAI,CAACrB,UAAU,EAAE;IACjBH,OAAO,CAACwB,CAAC,CAACyE,OAAO,GAAG5F,SAAS,CAACE,CAAC,CAAC;IAChCL,OAAO,CAACsB,CAAC,CAAC0E,OAAO,GAAG7F,SAAS,CAACG,CAAC,CAAC;EAClC;EAEA,SAAS4F,aAAaA,CAAA,EAAG;IACvBhG,aAAa,CAAC,KAAK,CAAC;EACtB;EAEA,SAASwD,iBAAiBA,CAAA,EAAG;IAC3BtE,YAAY,CAACF,eAAe,CAAC6D,OAAO,CAAC;IACrCpF,qBAAqB,CAACuB,eAAe,CAAC6D,OAAO,CAAC;IAC9ClF,mBAAmB,CAAC,EAAE,CAAC;IACvBmE,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE/C,eAAe,CAAC6D,OAAO,CAAC;EAChE;EAEA,SAASY,eAAeA,CAAA,EAAG;IACzB,IAAIxE,SAAS,KAAK,IAAI,EAAE;MACtByC,KAAK,CAAC,oCAAoC,CAAC;MAC3C;IACF;IACA/D,mBAAmB,CAACqB,eAAe,CAAC6D,OAAO,CAAC;IAC5Cf,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAE/C,eAAe,CAAC6D,OAAO,CAAC;EAC/D;EAEA,SAASkB,WAAWA,CAACkC,QAAQ,EAAE;IAC7B,MAAMC,UAAU,GAAGtC,QAAQ,CAACpG,kBAAkB,CAAC;IAC/C,MAAM2I,QAAQ,GAAGvC,QAAQ,CAAClG,gBAAgB,CAAC;IAC3C,MAAM0I,SAAS,GAAGF,UAAU,GAAG9H,SAAS;IACxC,MAAMiI,OAAO,GAAGF,QAAQ,GAAG/H,SAAS;IACpC,MAAMkI,QAAQ,GAAGzB,IAAI,CAACC,KAAK,CAACpG,aAAa,GAAGN,SAAS,CAAC;IACtD,IAAImI,KAAK,CAACL,UAAU,CAAC,IAAIK,KAAK,CAACJ,QAAQ,CAAC,EAAE;MACxCzE,KAAK,CAAC,6CAA6C,CAAC;MACpDtC,mBAAmB,CAAC,KAAK,CAAC;MAC1B;IACF;IACA,IAAI8G,UAAU,GAAG,CAAC,IAAIC,QAAQ,GAAGG,QAAQ,EAAE;MACzC5E,KAAK,CAAC,gCAAgC4E,QAAQ,GAAG,CAAC;MAClDlH,mBAAmB,CAAC,KAAK,CAAC;MAC1B;IACF;IACA,IAAI8G,UAAU,IAAIC,QAAQ,EAAE;MAC1BzE,KAAK,CAAC,0CAA0C,CAAC;MACjDtC,mBAAmB,CAAC,KAAK,CAAC;MAC1B;IACF;IACA7B,YAAY,CAAC2D,IAAI,IAAI,CACnB,GAAGA,IAAI,EACP;MAAEsF,KAAK,EAAEN,UAAU;MAAEO,GAAG,EAAEN,QAAQ;MAAEC,SAAS;MAAEC,OAAO;MAAEJ,QAAQ;MAAES,IAAI,EAAE;IAAM,CAAC,CAChF,CAAC;IACFjJ,qBAAqB,CAAC,EAAE,CAAC;IACzBE,mBAAmB,CAAC,EAAE,CAAC;IACvBE,mBAAmB,CAACX,SAAS,CAAC,CAAC,CAAC,CAAC;IACjCgC,YAAY,CAAC,IAAI,CAAC;IAClBf,OAAO,CAAC,CAAC,CAAC;IACV2D,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAE;MAAEyE,KAAK,EAAEN,UAAU;MAAEO,GAAG,EAAEN,QAAQ;MAAEC,SAAS;MAAEC,OAAO;MAAEJ;IAAS,CAAC,CAAC;EACpG;EAEA,SAASU,sBAAsBA,CAACC,GAAG,EAAEC,WAAW,EAAE;IAChDtJ,YAAY,CAAC2D,IAAI,IACfA,IAAI,CAAC4F,GAAG,CAAC,CAACC,QAAQ,EAAEC,CAAC,KACnBA,CAAC,KAAKJ,GAAG,GAAG;MAAE,GAAGG,QAAQ;MAAEd,QAAQ,EAAEY;IAAY,CAAC,GAAGE,QACvD,CACF,CAAC;IACDjF,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAE;MAAE6E,GAAG;MAAEX,QAAQ,EAAEY;IAAY,CAAC,CAAC;EAC3E;EAEA,SAASI,cAAcA,CAACL,GAAG,EAAE;IAC3BrJ,YAAY,CAACD,SAAS,CAAC4J,MAAM,CAAC,CAACC,CAAC,EAAEH,CAAC,KAAKA,CAAC,KAAKJ,GAAG,CAAC,CAAC;IACnD,IAAI1I,IAAI,GAAGf,WAAW,IAAIG,SAAS,CAACmE,MAAM,GAAG,CAAC,EAAE;MAC9CtD,OAAO,CAAC0G,IAAI,CAACU,GAAG,CAAC,CAAC,EAAErH,IAAI,GAAG,CAAC,CAAC,CAAC;IAChC;EACF;EAEA,SAASkJ,cAAcA,CAAA,EAAG;IACxB,MAAMC,GAAG,GAAG,IAAIzK,KAAK,CAAC,CAAC;IACvB,MAAM0K,YAAY,GAAGhK,SAAS,CAACwJ,GAAG,CAACE,CAAC,KAAK;MACvCpF,IAAI,EAAE,UAAU;MAChB2F,UAAU,EAAEP,CAAC,CAACZ,SAAS,CAAC5B,OAAO,CAAC,CAAC,CAAC;MAClCgD,QAAQ,EAAER,CAAC,CAACX,OAAO,CAAC7B,OAAO,CAAC,CAAC,CAAC;MAC9BiD,WAAW,EAAET,CAAC,CAACR,KAAK;MACpBkB,SAAS,EAAEV,CAAC,CAACP,GAAG;MAChBR,QAAQ,EAAEe,CAAC,CAACf;IACd,CAAC,CAAC,CAAC;IACH,MAAM0B,WAAW,GAAGhL,IAAI,CAACiL,OAAO,CAACN,YAAY,CAAC;IAC9CD,GAAG,CAAC1F,IAAI,CAAC,sBAAsB,EAAEgG,WAAW,CAAC;IAC7CN,GAAG,CAACQ,aAAa,CAAC;MAAEjG,IAAI,EAAE;IAAO,CAAC,CAAC,CAACY,IAAI,CAACsF,IAAI,IAAI;MAC/CjL,MAAM,CAACiL,IAAI,EAAE,qBAAqB,CAAC;IACrC,CAAC,CAAC;EACJ;EAEA,oBACE/K,OAAA,CAACR,aAAa;IAACiE,KAAK,EAAEA,KAAM;IAAAuH,QAAA,eAC1BhL,OAAA,CAACtB,GAAG;MAACuM,EAAE,EAAE;QAAEC,CAAC,EAAE,CAAC;QAAEC,OAAO,EAAE,oBAAoB;QAAEC,KAAK,EAAE;MAAe,CAAE;MAAAJ,QAAA,gBACtEhL,OAAA,CAACtB,GAAG;QAACuM,EAAE,EAAE;UAAEI,OAAO,EAAE,MAAM;UAAEC,cAAc,EAAE,eAAe;UAAEC,UAAU,EAAE,QAAQ;UAAEC,EAAE,EAAE;QAAE,CAAE;QAAAR,QAAA,gBACzFhL,OAAA,CAACrB,UAAU;UAAC8M,OAAO,EAAC,IAAI;UAACC,YAAY;UAAAV,QAAA,EAAC;QAAsB;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACzE9L,OAAA,CAACT,UAAU;UAACwM,OAAO,EAAE7H,WAAY;UAACkH,KAAK,EAAC,SAAS;UAAC,cAAW,cAAc;UAAAJ,QAAA,EACxE1I,SAAS,KAAK,OAAO,gBAAGtC,OAAA,CAACN,eAAe;YAAAiM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAAG9L,OAAA,CAACL,eAAe;YAAAgM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eACN9L,OAAA,CAACtB,GAAG;QAACuM,EAAE,EAAE;UAAEe,EAAE,EAAE,CAAC;UAAEX,OAAO,EAAE,MAAM;UAAEY,GAAG,EAAE,CAAC;UAAEV,UAAU,EAAE;QAAS,CAAE;QAAAP,QAAA,gBAChEhL,OAAA,CAACtB,GAAG;UAAAsM,QAAA,gBACFhL,OAAA,CAACrB,UAAU;YAAC8M,OAAO,EAAC,OAAO;YAACC,YAAY;YAAAV,QAAA,EAAC;UAAY;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eAClE9L,OAAA;YACE6E,IAAI,EAAC,MAAM;YACXqH,MAAM,EAAC,SAAS;YAChBC,QAAQ,EAAE/H,YAAa;YACvBgI,QAAQ,EAAEnL,YAAa;YACvB,cAAW;UAAmB;YAAA0K,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/B,CAAC,EACD7K,YAAY,iBACXjB,OAAA,CAACtB,GAAG;YAACuM,EAAE,EAAE;cAAEI,OAAO,EAAE,MAAM;cAAEE,UAAU,EAAE,QAAQ;cAAEU,GAAG,EAAE,CAAC;cAAEI,EAAE,EAAE;YAAE,CAAE;YAAArB,QAAA,gBAChEhL,OAAA,CAACd,gBAAgB;cAACoN,IAAI,EAAE;YAAG;cAAAX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAC9B9L,OAAA,CAACrB,UAAU;cAAC8M,OAAO,EAAC,OAAO;cAAAT,QAAA,EAAC;YAAmB;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzD,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,eACN9L,OAAA,CAACb,SAAS;UACRoN,KAAK,EAAC,kBAAkB;UACxB1H,IAAI,EAAC,QAAQ;UACb2H,KAAK,EAAEnL,SAAU;UACjB8K,QAAQ,EAAG9H,CAAC,IAAK;YACf,MAAMmI,KAAK,GAAGnI,CAAC,CAACI,MAAM,CAAC+H,KAAK;YAC5BzH,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEwH,KAAK,CAAC;YACvC,IAAIA,KAAK,KAAK,EAAE,EAAE;cAChBlL,YAAY,CAAC,EAAE,CAAC;YAClB,CAAC,MAAM;cACL,MAAMmL,QAAQ,GAAGC,UAAU,CAACF,KAAK,CAAC;cAClC,IAAI,CAAChD,KAAK,CAACiD,QAAQ,CAAC,IAAIA,QAAQ,IAAI,CAAC,EAAE;gBACrCnL,YAAY,CAACkL,KAAK,CAAC;cACrB;YACF;UACF,CAAE;UACFG,MAAM,EAAEA,CAAA,KAAM;YACZ,IAAIF,QAAQ,GAAGC,UAAU,CAACrL,SAAS,CAAC;YACpC,IAAImI,KAAK,CAACiD,QAAQ,CAAC,IAAIA,QAAQ,GAAG,CAAC,EAAE;cACnC1H,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;cAC9C1D,YAAY,CAAC,EAAE,CAAC;YAClB,CAAC,MAAM;cACLA,YAAY,CAACmL,QAAQ,CAAC;YACxB;UACF,CAAE;UACFH,IAAI,EAAC,OAAO;UACZM,UAAU,EAAE;YAAEtE,GAAG,EAAE,CAAC;YAAEuE,IAAI,EAAE;UAAE,CAAE;UAChC,cAAW;QAAY;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxB,CAAC,eACF9L,OAAA,CAACb,SAAS;UACRoN,KAAK,EAAC,qBAAqB;UAC3B1H,IAAI,EAAC,QAAQ;UACb2H,KAAK,EAAEjL,aAAc;UACrB4K,QAAQ,EAAG9H,CAAC,IAAK;YACf,MAAMmI,KAAK,GAAGnI,CAAC,CAACI,MAAM,CAAC+H,KAAK;YAC5BzH,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEwH,KAAK,CAAC;YAC3C,IAAIA,KAAK,KAAK,EAAE,EAAE;cAChBhL,gBAAgB,CAAC,EAAE,CAAC;YACtB,CAAC,MAAM;cACL,MAAMiL,QAAQ,GAAG5F,QAAQ,CAAC2F,KAAK,CAAC;cAChC,IAAI,CAAChD,KAAK,CAACiD,QAAQ,CAAC,IAAIA,QAAQ,IAAI,EAAE,EAAE;gBACtCjL,gBAAgB,CAACgL,KAAK,CAAC;cACzB;YACF;UACF,CAAE;UACFG,MAAM,EAAEA,CAAA,KAAM;YACZ,IAAIF,QAAQ,GAAG5F,QAAQ,CAACtF,aAAa,CAAC;YACtC,IAAIiI,KAAK,CAACiD,QAAQ,CAAC,IAAIA,QAAQ,GAAG,EAAE,EAAE;cACpC1H,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;cACnDxD,gBAAgB,CAAC,GAAG,CAAC;YACvB,CAAC,MAAM;cACLA,gBAAgB,CAACiL,QAAQ,CAAC;YAC5B;UACF,CAAE;UACFH,IAAI,EAAC,OAAO;UACZM,UAAU,EAAE;YAAEtE,GAAG,EAAE,EAAE;YAAEuE,IAAI,EAAE;UAAE,CAAE;UACjC,cAAW;QAA2B;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvC,CAAC,eACF9L,OAAA,CAACzB,MAAM;UACLwN,OAAO,EAAE1B,cAAe;UACxBoB,OAAO,EAAC,WAAW;UACnBL,KAAK,EAAC,SAAS;UACf,cAAW,UAAU;UAAAJ,QAAA,EACtB;QAED;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAEN9L,OAAA,CAACpB,IAAI;QAACkO,SAAS;QAACC,OAAO,EAAE,CAAE;QAAA/B,QAAA,gBACzBhL,OAAA,CAACpB,IAAI;UAACoO,IAAI;UAACC,EAAE,EAAE,CAAE;UAAAjC,QAAA,gBACfhL,OAAA,CAACrB,UAAU;YAAC8M,OAAO,EAAC,IAAI;YAAAT,QAAA,EAAC;UAAK;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,EAC1C,CAACrK,QAAQ,gBACRzB,OAAA,CAACtB,GAAG;YACFuM,EAAE,EAAE;cACFiC,KAAK,EAAE,MAAM;cACbC,QAAQ,EAAE,OAAO;cACjBC,MAAM,EAAE,OAAO;cACfC,eAAe,EAAE/K,SAAS,KAAK,MAAM,GAAG,MAAM,GAAG,SAAS;cAC1DgL,MAAM,EAAE,gBAAgB;cACxBjC,OAAO,EAAE,MAAM;cACfE,UAAU,EAAE,QAAQ;cACpBD,cAAc,EAAE,QAAQ;cACxBF,KAAK,EAAE9I,SAAS,KAAK,MAAM,GAAG,MAAM,GAAG,MAAM;cAC7CiL,QAAQ,EAAE,QAAQ;cAClBC,YAAY,EAAE;YAChB,CAAE;YACF,cAAW,mBAAmB;YAAAxC,QAAA,EAC/B;UAED;YAAAW,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,gBAEN9L,OAAA;YACEyN,GAAG,EAAEnK,QAAS;YACd4J,KAAK,EAAC,MAAM;YACZQ,KAAK,EAAE;cAAEP,QAAQ,EAAE,OAAO;cAAEG,MAAM,EAAE,gBAAgB;cAAEE,YAAY,EAAE;YAAM,CAAE;YAC5EG,YAAY,EAAE/F;UAAiB;YAAA+D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CACF,EACArK,QAAQ,iBACPzB,OAAA,CAAAE,SAAA;YAAA8K,QAAA,gBACEhL,OAAA,CAACtB,GAAG;cAACuM,EAAE,EAAE;gBAAEI,OAAO,EAAE,MAAM;gBAAEY,GAAG,EAAE,CAAC;gBAAEI,EAAE,EAAE,CAAC;gBAAEd,UAAU,EAAE;cAAS,CAAE;cAAAP,QAAA,gBAChEhL,OAAA,CAACzB,MAAM;gBACLkN,OAAO,EAAC,UAAU;gBAClBM,OAAO,EAAE3D,aAAc;gBACvB,cAAW,gBAAgB;gBAAA4C,QAAA,EAC5B;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT9L,OAAA,CAACzB,MAAM;gBACLkN,OAAO,EAAC,UAAU;gBAClBM,OAAO,EAAE5D,aAAc;gBACvB,cAAW,YAAY;gBAAA6C,QAAA,EACxB;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT9L,OAAA,CAACzB,MAAM;gBACLkN,OAAO,EAAC,UAAU;gBAClBM,OAAO,EAAEtF,iBAAkB;gBAC3B,cAAW,kBAAkB;gBAAAuE,QAAA,EAC9B;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT9L,OAAA,CAACzB,MAAM;gBACLkN,OAAO,EAAC,UAAU;gBAClBM,OAAO,EAAErF,eAAgB;gBACzB,cAAW,gBAAgB;gBAAAsE,QAAA,EAC5B;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT9L,OAAA,CAACrB,UAAU;gBAAAqM,QAAA,GAAC,iBACK,EAACjJ,YAAY,EAAC,KAAG,EAAC+F,IAAI,CAACC,KAAK,CAACpG,aAAa,GAAGN,SAAS,CAAC;cAAA;gBAAAsK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5D,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eACN9L,OAAA,CAACV,MAAM;cACLkN,KAAK,EAAEzK,YAAa;cACpBuG,GAAG,EAAE,CAAE;cACPE,GAAG,EAAEV,IAAI,CAACC,KAAK,CAACpG,aAAa,GAAGN,SAAS,CAAE;cAC3CwL,IAAI,EAAE,CAAE;cACRV,QAAQ,EAAEnE,kBAAmB;cAC7B,cAAW,sBAAsB;cACjCiD,EAAE,EAAE;gBAAEoB,EAAE,EAAE;cAAE;YAAE;cAAAV,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC;UAAA,eACF,CACH;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC,eACP9L,OAAA,CAACpB,IAAI;UAACoO,IAAI;UAACC,EAAE,EAAE,CAAE;UAAAjC,QAAA,eACfhL,OAAA,CAACtB,GAAG;YAACuM,EAAE,EAAE;cAAEC,CAAC,EAAE,CAAC;cAAEoC,MAAM,EAAE,gBAAgB;cAAEE,YAAY,EAAE,CAAC;cAAErC,OAAO,EAAE,kBAAkB;cAAEiC,MAAM,EAAE;YAAO,CAAE;YAAApC,QAAA,gBACxGhL,OAAA,CAACrB,UAAU;cAAC8M,OAAO,EAAC,IAAI;cAACC,YAAY;cAAAV,QAAA,EAAC;YAAkB;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACrE9L,OAAA,CAACrB,UAAU;cAAC8M,OAAO,EAAC,OAAO;cAACC,YAAY;cAAAV,QAAA,EAAC;YAEzC;cAAAW,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACb9L,OAAA,CAACtB,GAAG;cAACuM,EAAE,EAAE;gBAAEI,OAAO,EAAE,MAAM;gBAAEY,GAAG,EAAE,CAAC;gBAAEV,UAAU,EAAE,QAAQ;gBAAEC,EAAE,EAAE;cAAE,CAAE;cAAAR,QAAA,gBAChEhL,OAAA,CAACb,SAAS;gBACRoN,KAAK,EAAC,aAAa;gBACnB1H,IAAI,EAAC,QAAQ;gBACb2H,KAAK,EAAE/L,kBAAmB;gBAC1B0L,QAAQ,EAAG9H,CAAC,IAAK;kBACf,MAAMuJ,CAAC,GAAGvJ,CAAC,CAACI,MAAM,CAAC+H,KAAK;kBACxBzH,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE4I,CAAC,CAAC;kBACpClN,qBAAqB,CAACkN,CAAC,CAAC;kBACxB,IAAIA,CAAC,KAAK,EAAE,EAAEzL,YAAY,CAAC0L,MAAM,CAACD,CAAC,CAAC,CAAC,CAAC,KACjCzL,YAAY,CAAC,IAAI,CAAC;gBACzB,CAAE;gBACFmK,IAAI,EAAC,OAAO;gBACZM,UAAU,EAAE;kBAAEtE,GAAG,EAAE,CAAC;kBAAEuE,IAAI,EAAE;gBAAE,CAAE;gBAChC,cAAW;cAAsB;gBAAAlB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClC,CAAC,eACF9L,OAAA,CAACb,SAAS;gBACRoN,KAAK,EAAC,WAAW;gBACjB1H,IAAI,EAAC,QAAQ;gBACb2H,KAAK,EAAE/L,kBAAkB,KAAK,EAAE,GAAGE,gBAAgB,GAAG,EAAG;gBACzDwL,QAAQ,EAAG9H,CAAC,IAAK;kBACf,MAAMuJ,CAAC,GAAGvJ,CAAC,CAACI,MAAM,CAAC+H,KAAK;kBACxBzH,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAE4I,CAAC,CAAC;kBAClChN,mBAAmB,CAACgN,CAAC,CAAC;gBACxB,CAAE;gBACFtB,IAAI,EAAC,OAAO;gBACZM,UAAU,EAAE;kBAAEtE,GAAG,EAAE7H,kBAAkB,KAAK,EAAE,GAAGoN,MAAM,CAACpN,kBAAkB,CAAC,GAAG,CAAC;kBAAEoM,IAAI,EAAE;gBAAE,CAAE;gBACzF,cAAW,oBAAoB;gBAC/BT,QAAQ,EAAE3L,kBAAkB,KAAK;cAAG;gBAAAkL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrC,CAAC,eACF9L,OAAA,CAACZ,WAAW;gBAACkN,IAAI,EAAC,OAAO;gBAACrB,EAAE,EAAE;kBAAE6C,QAAQ,EAAE;gBAAI,CAAE;gBAAA9C,QAAA,gBAC9ChL,OAAA,CAACX,UAAU;kBAAA2L,QAAA,EAAC;gBAAQ;kBAAAW,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACjC9L,OAAA,CAACxB,MAAM;kBACLgO,KAAK,EAAE3L,gBAAiB;kBACxB0L,KAAK,EAAC,UAAU;kBAChBJ,QAAQ,EAAG9H,CAAC,IAAKvD,mBAAmB,CAACuD,CAAC,CAACI,MAAM,CAAC+H,KAAK,CAAE;kBAAAxB,QAAA,EAEpD7K,SAAS,CAAC4J,GAAG,CAAC,CAACgE,CAAC,EAAE9D,CAAC,kBAClBjK,OAAA,CAACvB,QAAQ;oBAAS+N,KAAK,EAAEuB,CAAE;oBAAA/C,QAAA,EAAE,GAAG+C,CAAC,KAAK9D,CAAC,GAAG,CAAC;kBAAG,GAA/B8D,CAAC;oBAAApC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAyC,CAC1D;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACd9L,OAAA,CAACzB,MAAM;gBACLwN,OAAO,EAAEA,CAAA,KAAM/E,WAAW,CAACnG,gBAAgB,CAAE;gBAC7C4K,OAAO,EAAC,WAAW;gBACnB,cAAW,cAAc;gBACzBW,QAAQ,EAAE3L,kBAAkB,KAAK,EAAE,IAAIE,gBAAgB,KAAK,EAAG;gBAAAqK,QAAA,EAChE;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eACN9L,OAAA,CAACnB,KAAK;cAACyN,IAAI,EAAC,OAAO;cAAAtB,QAAA,gBACjBhL,OAAA,CAAClB,SAAS;gBAAAkM,QAAA,eACRhL,OAAA,CAACjB,QAAQ;kBAAAiM,QAAA,gBACPhL,OAAA,CAAChB,SAAS;oBAAAgM,QAAA,EAAC;kBAAgB;oBAAAW,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAW,CAAC,eACvC9L,OAAA,CAAChB,SAAS;oBAAAgM,QAAA,EAAC;kBAAQ;oBAAAW,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAW,CAAC,eAC/B9L,OAAA,CAAChB,SAAS;oBAAAgM,QAAA,EAAC;kBAAM;oBAAAW,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAW,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACrB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF,CAAC,eACZ9L,OAAA,CAACf,SAAS;gBAAA+L,QAAA,EACPzK,SAAS,CAACmE,MAAM,KAAK,CAAC,gBACrB1E,OAAA,CAACjB,QAAQ;kBAAAiM,QAAA,eACPhL,OAAA,CAAChB,SAAS;oBAACgP,OAAO,EAAE,CAAE;oBAACC,KAAK,EAAC,QAAQ;oBAAAjD,QAAA,EAAC;kBAEtC;oBAAAW,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAW;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,GAEXvL,SAAS,CACN2N,KAAK,CAAC,CAAC,CACPC,IAAI,CAAC,CAACC,CAAC,EAAEL,CAAC,KAAKA,CAAC,CAACtE,KAAK,GAAG2E,CAAC,CAAC3E,KAAK,CAAC,CACjCyE,KAAK,CAAC/M,IAAI,GAAGf,WAAW,EAAE,CAACe,IAAI,GAAG,CAAC,IAAIf,WAAW,CAAC,CACnD2J,GAAG,CAAC,CAACC,QAAQ,EAAEC,CAAC,kBACfjK,OAAA,CAACjB,QAAQ;kBAAAiM,QAAA,gBACPhL,OAAA,CAAChB,SAAS;oBAAAgM,QAAA,EAAE,GAAGhB,QAAQ,CAACP,KAAK,MAAMO,QAAQ,CAACN,GAAG;kBAAE;oBAAAiC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAY,CAAC,eAC9D9L,OAAA,CAAChB,SAAS;oBAAAgM,QAAA,eACRhL,OAAA,CAACZ,WAAW;sBAACkN,IAAI,EAAC,OAAO;sBAACrB,EAAE,EAAE;wBAAE6C,QAAQ,EAAE;sBAAI,CAAE;sBAAA9C,QAAA,gBAC9ChL,OAAA,CAACX,UAAU;wBAAA2L,QAAA,EAAC;sBAAQ;wBAAAW,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAY,CAAC,eACjC9L,OAAA,CAACxB,MAAM;wBACLgO,KAAK,EAAExC,QAAQ,CAACd,QAAS;wBACzBqD,KAAK,EAAC,UAAU;wBAChBJ,QAAQ,EAAG9H,CAAC,IAAKuF,sBAAsB,CAACrJ,SAAS,CAAC8N,OAAO,CAACrE,QAAQ,CAAC,EAAE3F,CAAC,CAACI,MAAM,CAAC+H,KAAK,CAAE;wBAAAxB,QAAA,EAEpF7K,SAAS,CAAC4J,GAAG,CAAC,CAACgE,CAAC,EAAEO,CAAC,kBAClBtO,OAAA,CAACvB,QAAQ;0BAAS+N,KAAK,EAAEuB,CAAE;0BAAA/C,QAAA,EAAE,GAAG+C,CAAC,KAAKO,CAAC,GAAG,CAAC;wBAAG,GAA/BP,CAAC;0BAAApC,QAAA,EAAAC,YAAA;0BAAAC,UAAA;0BAAAC,YAAA;wBAAA,OAAyC,CAC1D;sBAAC;wBAAAH,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OACI,CAAC;oBAAA;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL,CAAC,eACZ9L,OAAA,CAAChB,SAAS;oBAAAgM,QAAA,eACRhL,OAAA,CAACzB,MAAM;sBACLkN,OAAO,EAAC,UAAU;sBAClBL,KAAK,EAAC,OAAO;sBACbkB,IAAI,EAAC,OAAO;sBACZP,OAAO,EAAEA,CAAA,KAAM7B,cAAc,CAAC3J,SAAS,CAAC8N,OAAO,CAACrE,QAAQ,CAAC,CAAE;sBAC3D,cAAY,mBAAmBC,CAAC,GAAG,CAAC,EAAG;sBAAAe,QAAA,EACxC;oBAED;sBAAAW,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACA,CAAC;gBAAA,GA1BC7B,CAAC;kBAAA0B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OA2BN,CACX;cACJ;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACP,CAAC,EACPvL,SAAS,CAACmE,MAAM,GAAGtE,WAAW,iBAC7BJ,OAAA,CAACtB,GAAG;cAACuM,EAAE,EAAE;gBAAEoB,EAAE,EAAE,CAAC;gBAAEhB,OAAO,EAAE,MAAM;gBAAEY,GAAG,EAAE;cAAE,CAAE;cAAAjB,QAAA,gBAC1ChL,OAAA,CAACzB,MAAM;gBACLwN,OAAO,EAAEA,CAAA,KAAM3K,OAAO,CAAC8J,CAAC,IAAIpD,IAAI,CAACU,GAAG,CAAC,CAAC,EAAE0C,CAAC,GAAG,CAAC,CAAC,CAAE;gBAChDkB,QAAQ,EAAEjL,IAAI,KAAK,CAAE;gBACrBsK,OAAO,EAAC,UAAU;gBAClB,cAAW,eAAe;gBAAAT,QAAA,EAC3B;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT9L,OAAA,CAACzB,MAAM;gBACLwN,OAAO,EAAEA,CAAA,KAAM3K,OAAO,CAAC8J,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAE;gBACnCkB,QAAQ,EAAE,CAACjL,IAAI,GAAG,CAAC,IAAIf,WAAW,IAAIG,SAAS,CAACmE,MAAO;gBACvD+G,OAAO,EAAC,UAAU;gBAClB,cAAW,WAAW;gBAAAT,QAAA,EACvB;cAED;gBAAAW,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACT9L,OAAA,CAACrB,UAAU;gBAAAqM,QAAA,GAAC,OACL,EAAC7J,IAAI,GAAG,CAAC,EAAC,KAAG,EAAC2G,IAAI,CAACyG,IAAI,CAAChO,SAAS,CAACmE,MAAM,GAAGtE,WAAW,CAAC;cAAA;gBAAAuL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACO,CAAC;AAEpB;AAACxL,EAAA,CAnqBQD,GAAG;AAAAmO,EAAA,GAAHnO,GAAG;AAqqBZ,eAAeA,GAAG;AAAC,IAAAmO,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}