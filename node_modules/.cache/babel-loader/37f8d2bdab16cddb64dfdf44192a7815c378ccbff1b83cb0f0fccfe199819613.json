{"ast":null,"code":"var _jsxFileName = \"/media/sj/linux/annotator/behavior_annotator/frame-tool-jm-main/frontend/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport { Button, Select, MenuItem, Box, Typography, Grid, Table, TableHead, TableRow, TableCell, TableBody, CircularProgress, TextField, FormControl, InputLabel, Slider, IconButton, LinearProgress } from \"@mui/material\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport { CssBaseline } from \"@mui/material\";\nimport Brightness4Icon from \"@mui/icons-material/Brightness4\";\nimport Brightness7Icon from \"@mui/icons-material/Brightness7\";\nimport Papa from \"papaparse\";\nimport JSZip from \"jszip\";\nimport { saveAs } from \"file-saver\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst behaviors = [\"attacking\", \"jumping\", \"unsupported rearing\", \"supported rearing\", \"grooming\", \"freezing\"];\nconst rowsPerPage = 15;\nfunction App() {\n  _s();\n  var _conversionProgress$c, _conversionProgress$t;\n  const [intervals, setIntervals] = useState([]);\n  const [intervalStartFrame, setIntervalStartFrame] = useState(\"\");\n  const [intervalEndFrame, setIntervalEndFrame] = useState(\"\");\n  const [intervalBehavior, setIntervalBehavior] = useState(behaviors[0]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isConverting, setIsConverting] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [conversionProgress, setConversionProgress] = useState({\n    percent: 0,\n    current_frame: 0,\n    total_frames: 0,\n    speed: '0x',\n    time_processed: '00:00:00',\n    eta: 'calculating...',\n    status: 'idle'\n  });\n  const [sessionId, setSessionId] = useState(null);\n  const [page, setPage] = useState(0);\n  const [frameRate, setFrameRate] = useState(30); // Default FPS set to 30\n  const [frameInterval, setFrameInterval] = useState(100); // Frame transition interval in ms\n  const [videoUrl, setVideoUrl] = useState(null);\n  const [videoDuration, setVideoDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [currentFrame, setCurrentFrame] = useState(0);\n  const currentFrameRef = useRef(0);\n  const [markStart, setMarkStart] = useState(null);\n  const [isAddingInterval, setIsAddingInterval] = useState(false);\n  const [themeMode, setThemeMode] = useState(\"light\");\n  const [arrowPressed, setArrowPressed] = useState(null);\n  const [zoom, setZoom] = useState(1);\n  const [panX, setPanX] = useState(0);\n  const [panY, setPanY] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const videoRef = useRef(null);\n  const frameIntervalRef = useRef(null);\n  const videoContainerRef = useRef(null);\n  const theme = createTheme({\n    palette: {\n      mode: themeMode,\n      ...(themeMode === \"dark\" ? {\n        background: {\n          default: \"#2d2d2d\",\n          // Brighter dark gray for main background\n          paper: \"#3a3a3a\" // Slightly lighter dark gray for cards/papers\n        },\n        text: {\n          primary: \"#e0e0e0\",\n          // Brighter text for better readability\n          secondary: \"#b0b0b0\" // Secondary text color\n        },\n        primary: {\n          main: \"#e7657cff\"\n        },\n        divider: \"#4a4a4a\" // Dark gray dividers\n      } : {\n        background: {\n          default: \"#ffffff\",\n          paper: \"#ffffff\"\n        },\n        text: {\n          primary: \"#000000\",\n          secondary: \"#666666\"\n        },\n        primary: {\n          main: \"#e7657cff\"\n        },\n        divider: \"#e0e0e0\"\n      })\n    },\n    components: {\n      // Ensure dark theme is applied to borders and other components\n      ...(themeMode === \"dark\" && {\n        MuiCssBaseline: {\n          styleOverrides: {\n            body: {\n              backgroundColor: \"#2d2d2d\",\n              margin: 0,\n              padding: 0\n            },\n            html: {\n              backgroundColor: \"#2d2d2d\"\n            }\n          }\n        },\n        MuiTextField: {\n          styleOverrides: {\n            root: {\n              '& .MuiOutlinedInput-root': {\n                '& fieldset': {\n                  borderColor: '#5a5a5a'\n                },\n                '&:hover fieldset': {\n                  borderColor: '#7a7a7a'\n                }\n              }\n            }\n          }\n        },\n        MuiButton: {\n          styleOverrides: {\n            outlined: {\n              borderColor: '#5a5a5a',\n              '&:hover': {\n                borderColor: '#7a7a7a'\n              }\n            }\n          }\n        }\n      })\n    }\n  });\n  const toggleTheme = () => {\n    setThemeMode(prev => prev === \"light\" ? \"dark\" : \"light\");\n  };\n\n  // Progress polling function\n  const pollProgress = async sessionId => {\n    try {\n      console.log(`Polling progress for session: ${sessionId}`);\n      const response = await fetch(`http://localhost:5000/progress/${sessionId}`);\n      const progressData = await response.json();\n      console.log(\"Progress data received:\", progressData);\n      setConversionProgress(progressData);\n\n      // Continue polling if still processing\n      if (progressData.status === 'processing' && progressData.percent < 100) {\n        setTimeout(() => pollProgress(sessionId), 500); // Poll every 500ms\n      } else if (progressData.status === 'completed') {\n        setIsConverting(false);\n        setUploadProgress(100);\n        console.log(\"Video conversion completed!\");\n\n        // Now that conversion is complete, the video should be accessible\n        // Trigger video load\n        if (videoRef.current) {\n          videoRef.current.load();\n        }\n      } else if (progressData.status === 'error') {\n        setIsConverting(false);\n        alert(`Video processing failed: ${progressData.error || 'Unknown error'}`);\n        // Reset video URL on error\n        setVideoUrl(null);\n      }\n    } catch (error) {\n      console.error(\"Error polling progress:\", error);\n      setTimeout(() => pollProgress(sessionId), 1000); // Retry in 1 second\n    }\n  };\n\n  // Apply background color to body element immediately\n  useEffect(() => {\n    const backgroundColor = themeMode === \"dark\" ? \"#2d2d2d\" : \"#ffffff\";\n    document.body.style.backgroundColor = backgroundColor;\n    document.documentElement.style.backgroundColor = backgroundColor;\n    return () => {\n      // Clean up on unmount\n      document.body.style.backgroundColor = \"\";\n      document.documentElement.style.backgroundColor = \"\";\n    };\n  }, [themeMode]);\n  async function onFileChange(e) {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) {\n      alert(\"Please select a video.\");\n      return;\n    }\n\n    // Reset progress states\n    setIsUploading(true);\n    setIsConverting(true);\n    setUploadProgress(0);\n    setConversionProgress({\n      percent: 0,\n      current_frame: 0,\n      total_frames: 0,\n      speed: '0x',\n      time_processed: '00:00:00',\n      eta: 'calculating...',\n      status: 'uploading'\n    });\n    const file = files[0];\n    if (!file.type.startsWith(\"video/\")) {\n      alert(\"Only video files can be uploaded.\");\n      setIsUploading(false);\n      setIsConverting(false);\n      return;\n    }\n    console.log(\"Video file uploaded:\", file.name, \"Type:\", file.type);\n    const fd = new FormData();\n    fd.append(\"video\", file);\n    try {\n      // Simulate upload progress (since fetch doesn't provide upload progress easily)\n      setUploadProgress(25);\n      const res = await fetch(\"http://localhost:5000/process-video\", {\n        method: \"POST\",\n        body: fd\n      }).then(res => res.json());\n      setUploadProgress(50);\n      if (res.status === \"error\") {\n        alert(`Video processing failed: ${res.msg}`);\n        setIsUploading(false);\n        setIsConverting(false);\n        return;\n      }\n\n      // Upload completed, now start conversion tracking\n      setIsUploading(false);\n      setUploadProgress(100);\n      setSessionId(res.session_id);\n      setVideoUrl(res.converted_url);\n      console.log(\"Upload completed, session ID:\", res.session_id);\n      console.log(\"Video URL:\", res.converted_url);\n\n      // Reset other states\n      setCurrentTime(0);\n      setCurrentFrame(0);\n      currentFrameRef.current = 0;\n      setIntervals([]);\n      setMarkStart(null);\n      setIntervalStartFrame(\"\");\n      setIntervalEndFrame(\"\");\n      setPage(0);\n      // Reset zoom when new video is loaded\n      setZoom(1);\n      setPanX(0);\n      setPanY(0);\n\n      // Start polling for conversion progress\n      console.log(\"Starting progress polling for session:\", res.session_id);\n      pollProgress(res.session_id);\n    } catch (error) {\n      alert(`Video processing failed: ${error.message}`);\n      setIsUploading(false);\n      setIsConverting(false);\n      setUploadProgress(0);\n    }\n  }\n  useEffect(() => {\n    if (videoUrl && videoRef.current) {\n      console.log(\"Setting video src:\", videoUrl);\n      videoRef.current.src = videoUrl;\n      videoRef.current.load();\n      videoRef.current.onloadedmetadata = () => {\n        console.log(\"Video metadata loaded, duration:\", videoRef.current.duration);\n        setVideoDuration(videoRef.current.duration);\n      };\n      videoRef.current.onerror = e => {\n        console.error(\"Video error:\", e);\n        alert(\"Video playback failed: Please check the converted MP4 file.\");\n      };\n    }\n    return () => {\n      if (videoRef.current) {\n        console.log(\"Cleaning up videoRef\");\n        videoRef.current.onloadedmetadata = null;\n        videoRef.current.onerror = null;\n      }\n    };\n  }, [videoUrl]);\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Check if user is typing in an input field\n      const activeElement = document.activeElement;\n      const isInInputField = activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA' || activeElement.contentEditable === 'true');\n\n      // If user is typing in an input field, don't interfere with keyboard input\n      if (isInInputField) {\n        return;\n      }\n\n      // Only prevent default for our shortcuts, not for input fields\n      if (isAddingInterval) return;\n      if (e.code === \"KeyS\") {\n        e.preventDefault();\n        markIntervalStart();\n      } else if (e.code === \"KeyE\") {\n        e.preventDefault();\n        markIntervalEnd();\n      } else if ([\"Digit1\", \"Digit2\", \"Digit3\", \"Digit4\", \"Digit5\", \"Digit6\"].includes(e.code)) {\n        e.preventDefault();\n        const behaviorIndex = parseInt(e.code.replace(\"Digit\", \"\")) - 1;\n        if (behaviorIndex < behaviors.length && markStart !== null && intervalEndFrame !== \"\") {\n          setIsAddingInterval(true);\n          const selectedBehavior = behaviors[behaviorIndex];\n          console.log(`Behavior selected and interval added: ${selectedBehavior}`);\n          setIntervalBehavior(selectedBehavior);\n          addInterval(selectedBehavior);\n        }\n      } else if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\n        e.preventDefault();\n        setArrowPressed(e.code);\n      } else if (e.code === \"Equal\" || e.code === \"NumpadAdd\") {\n        // + key for zoom in\n        e.preventDefault();\n        zoomIn();\n      } else if (e.code === \"Minus\" || e.code === \"NumpadSubtract\") {\n        // - key for zoom out\n        e.preventDefault();\n        zoomOut();\n      } else if (e.code === \"Digit0\" || e.code === \"Numpad0\") {\n        // 0 key for reset zoom\n        e.preventDefault();\n        resetZoom();\n      }\n    };\n    const handleKeyUp = e => {\n      if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\n        setArrowPressed(null);\n        if (markStart !== null) {\n          markIntervalEnd();\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"keyup\", handleKeyUp);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, [markStart, intervalEndFrame, isAddingInterval]);\n  useEffect(() => {\n    currentFrameRef.current = currentFrame;\n  }, [currentFrame]);\n  useEffect(() => {\n    if (arrowPressed) {\n      const moveFrame = () => {\n        if (!videoRef.current) return;\n        const direction = arrowPressed === \"ArrowRight\" ? 1 : -1;\n        const newFrame = currentFrameRef.current + direction;\n        const newTime = newFrame / frameRate;\n        if (newTime >= 0 && newTime <= videoDuration) {\n          setCurrentTime(newTime);\n          setCurrentFrame(newFrame);\n          currentFrameRef.current = newFrame;\n          videoRef.current.currentTime = newTime;\n          console.log(`Moved to frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n        }\n        frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\n      };\n      frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\n    } else {\n      if (frameIntervalRef.current) {\n        clearTimeout(frameIntervalRef.current);\n        frameIntervalRef.current = null;\n      }\n    }\n    return () => {\n      if (frameIntervalRef.current) {\n        clearTimeout(frameIntervalRef.current);\n      }\n    };\n  }, [arrowPressed, frameRate, videoDuration, frameInterval]);\n  useEffect(() => {\n    if (isAddingInterval) {\n      setIsAddingInterval(false);\n    }\n  }, [intervals]);\n\n  // Mouse event handlers for zoom and pan\n  useEffect(() => {\n    const handleGlobalMouseMove = e => handleMouseMove(e);\n    const handleGlobalMouseUp = () => handleMouseUp();\n    if (isDragging) {\n      document.addEventListener('mousemove', handleGlobalMouseMove);\n      document.addEventListener('mouseup', handleGlobalMouseUp);\n    }\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n    };\n  }, [isDragging, dragStart.x, dragStart.y]);\n  function handleTimeUpdate() {\n    if (!videoRef.current) return;\n    const time = videoRef.current.currentTime;\n    setCurrentTime(time);\n    const newFrame = Math.round(time * frameRate);\n    setCurrentFrame(newFrame);\n    currentFrameRef.current = newFrame;\n  }\n  function handleSliderChange(event, newValue) {\n    const newTime = newValue / frameRate;\n    setCurrentTime(newTime);\n    setCurrentFrame(newValue);\n    currentFrameRef.current = newValue;\n    if (videoRef.current) {\n      console.log(\"Slider changed, setting video frame:\", newValue);\n      videoRef.current.currentTime = newTime;\n    }\n  }\n  function moveNextFrame() {\n    const newFrame = currentFrame + 1;\n    const newTime = newFrame / frameRate;\n    if (newTime <= videoDuration) {\n      setCurrentTime(newTime);\n      setCurrentFrame(newFrame);\n      currentFrameRef.current = newFrame;\n      if (videoRef.current) {\n        videoRef.current.currentTime = newTime;\n        console.log(`Next frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n      }\n    }\n  }\n  function movePrevFrame() {\n    const newFrame = currentFrame - 1;\n    const newTime = newFrame / frameRate;\n    if (newTime >= 0) {\n      setCurrentTime(newTime);\n      setCurrentFrame(newFrame);\n      currentFrameRef.current = newFrame;\n      if (videoRef.current) {\n        videoRef.current.currentTime = newTime;\n        console.log(`Previous frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n      }\n    }\n  }\n\n  // Zoom functions\n  function zoomIn() {\n    setZoom(prev => Math.min(prev * 1.5, 5)); // Max zoom 5x\n  }\n  function zoomOut() {\n    setZoom(prev => Math.max(prev / 1.5, 0.5)); // Min zoom 0.5x\n  }\n  function resetZoom() {\n    setZoom(1);\n    setPanX(0);\n    setPanY(0);\n  }\n  function handleWheel(e) {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? 0.9 : 1.1;\n    setZoom(prev => Math.min(Math.max(prev * delta, 0.5), 5));\n  }\n  function handleMouseDown(e) {\n    setIsDragging(true);\n    setDragStart({\n      x: e.clientX - panX,\n      y: e.clientY - panY\n    });\n  }\n  function handleMouseMove(e) {\n    if (!isDragging) return;\n    setPanX(e.clientX - dragStart.x);\n    setPanY(e.clientY - dragStart.y);\n  }\n  function handleMouseUp() {\n    setIsDragging(false);\n  }\n  function markIntervalStart() {\n    setMarkStart(currentFrameRef.current);\n    setIntervalStartFrame(currentFrameRef.current);\n    setIntervalEndFrame(\"\");\n    console.log(\"Interval start marked:\", currentFrameRef.current);\n  }\n  function markIntervalEnd() {\n    if (markStart === null) {\n      alert(\"Please mark the start frame first.\");\n      return;\n    }\n    setIntervalEndFrame(currentFrameRef.current);\n    console.log(\"Interval end updated:\", currentFrameRef.current);\n  }\n  function addInterval(behavior) {\n    const startFrame = parseInt(intervalStartFrame);\n    const endFrame = parseInt(intervalEndFrame);\n    const startTime = startFrame / frameRate;\n    const endTime = endFrame / frameRate;\n    const maxFrame = Math.round(videoDuration * frameRate);\n    if (isNaN(startFrame) || isNaN(endFrame)) {\n      alert(\"Start and end frames must be valid numbers.\");\n      setIsAddingInterval(false);\n      return;\n    }\n    if (startFrame < 0 || endFrame > maxFrame) {\n      alert(`Frames must be between 0 and ${maxFrame}.`);\n      setIsAddingInterval(false);\n      return;\n    }\n    if (startFrame >= endFrame) {\n      alert(\"Start frame must be less than end frame.\");\n      setIsAddingInterval(false);\n      return;\n    }\n    setIntervals(prev => [...prev, {\n      start: startFrame,\n      end: endFrame,\n      startTime,\n      endTime,\n      behavior,\n      auto: false\n    }]);\n    setIntervalStartFrame(\"\");\n    setIntervalEndFrame(\"\");\n    setIntervalBehavior(behaviors[0]);\n    setMarkStart(null);\n    setPage(0);\n    console.log(\"Interval added:\", {\n      start: startFrame,\n      end: endFrame,\n      startTime,\n      endTime,\n      behavior\n    });\n  }\n  function updateIntervalBehavior(idx, newBehavior) {\n    setIntervals(prev => prev.map((interval, i) => i === idx ? {\n      ...interval,\n      behavior: newBehavior\n    } : interval));\n    console.log(\"Interval behavior updated:\", {\n      idx,\n      behavior: newBehavior\n    });\n  }\n  function removeInterval(idx) {\n    setIntervals(intervals.filter((_, i) => i !== idx));\n    if (page * rowsPerPage >= intervals.length - 1) {\n      setPage(Math.max(0, page - 1));\n    }\n  }\n  function downloadCsvAll() {\n    const zip = new JSZip();\n    const intervalData = intervals.map(i => ({\n      type: \"interval\",\n      start_time: i.startTime.toFixed(2),\n      end_time: i.endTime.toFixed(2),\n      start_frame: i.start,\n      end_frame: i.end,\n      behavior: i.behavior\n    }));\n    const intervalCsv = Papa.unparse(intervalData);\n    zip.file(\"interval_summary.csv\", intervalCsv);\n    zip.generateAsync({\n      type: \"blob\"\n    }).then(blob => {\n      saveAs(blob, \"behavior_labels.zip\");\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 573,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        minHeight: '100vh',\n        bgcolor: 'background.default',\n        color: 'text.primary',\n        p: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          gutterBottom: true,\n          children: \"Behavior Labeling Tool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: toggleTheme,\n          color: \"inherit\",\n          \"aria-label\": \"Toggle theme\",\n          children: themeMode === \"light\" ? /*#__PURE__*/_jsxDEV(Brightness4Icon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 38\n          }, this) : /*#__PURE__*/_jsxDEV(Brightness7Icon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 60\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          my: 2,\n          display: 'flex',\n          gap: 2,\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            gutterBottom: true,\n            children: \"Select Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"video/*\",\n            onChange: onFileChange,\n            disabled: isConverting,\n            \"aria-label\": \"Select video file\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 13\n          }, this), (isUploading || isConverting) && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 2,\n              p: 2,\n              border: 1,\n              borderColor: 'divider',\n              borderRadius: 1,\n              bgcolor: 'background.paper'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: isUploading ? 'Uploading Video...' : 'Converting Video...'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 17\n            }, this), isUploading && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  mb: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: \"Upload Progress\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: [uploadProgress, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(LinearProgress, {\n                variant: \"determinate\",\n                value: uploadProgress,\n                sx: {\n                  height: 8,\n                  borderRadius: 4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 19\n            }, this), isConverting && conversionProgress.status === 'processing' && /*#__PURE__*/_jsxDEV(Box, {\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  mb: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: \"Conversion Progress\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 619,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: conversionProgress.percent > 0 ? `${Math.round(conversionProgress.percent)}%` : 'Processing...'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 21\n              }, this), process.env.NODE_ENV === 'development' && /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                sx: {\n                  display: 'block',\n                  mb: 1,\n                  color: 'orange'\n                },\n                children: [\"DEBUG: status=\", conversionProgress.status, \", percent=\", conversionProgress.percent, \", frame=\", conversionProgress.current_frame]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 23\n              }, this), conversionProgress.percent > 0 ? /*#__PURE__*/_jsxDEV(LinearProgress, {\n                variant: \"determinate\",\n                value: conversionProgress.percent,\n                sx: {\n                  height: 8,\n                  borderRadius: 4,\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 23\n              }, this) : /*#__PURE__*/_jsxDEV(LinearProgress, {\n                variant: \"indeterminate\",\n                sx: {\n                  height: 8,\n                  borderRadius: 4,\n                  mb: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 639,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [conversionProgress.current_frame > 0 && /*#__PURE__*/_jsxDEV(Grid, {\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: [\"Frame: \", (_conversionProgress$c = conversionProgress.current_frame) === null || _conversionProgress$c === void 0 ? void 0 : _conversionProgress$c.toLocaleString(), conversionProgress.total_frames ? ` / ${(_conversionProgress$t = conversionProgress.total_frames) === null || _conversionProgress$t === void 0 ? void 0 : _conversionProgress$t.toLocaleString()}` : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 647,\n                  columnNumber: 25\n                }, this), conversionProgress.speed && conversionProgress.speed !== '0x' && /*#__PURE__*/_jsxDEV(Grid, {\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: [\"Speed: \", conversionProgress.speed]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 656,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 655,\n                  columnNumber: 25\n                }, this), conversionProgress.time_processed && conversionProgress.time_processed !== '00:00:00' && /*#__PURE__*/_jsxDEV(Grid, {\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: [\"Time: \", conversionProgress.time_processed]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 663,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 662,\n                  columnNumber: 25\n                }, this), conversionProgress.eta && conversionProgress.eta !== 'calculating...' && /*#__PURE__*/_jsxDEV(Grid, {\n                  xs: 6,\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: [\"ETA: \", conversionProgress.eta]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 670,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 25\n                }, this), (!conversionProgress.current_frame || conversionProgress.current_frame === 0) && /*#__PURE__*/_jsxDEV(Grid, {\n                  xs: 12,\n                  children: /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: \"FFmpeg is analyzing your video and starting conversion...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 677,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 19\n            }, this), isConverting && (!conversionProgress.status || conversionProgress.status === 'uploading') && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                gap: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 688,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: \"Preparing for conversion...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 687,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Frame Rate (FPS)\",\n          type: \"number\",\n          value: frameRate,\n          onChange: e => {\n            setFrameRate(e.target.value);\n          },\n          onBlur: () => {\n            const numValue = parseFloat(frameRate);\n            if (isNaN(numValue) || numValue < 1) {\n              setFrameRate(30);\n            } else {\n              setFrameRate(numValue);\n            }\n          },\n          size: \"small\",\n          inputProps: {\n            min: 1,\n            step: 1\n          },\n          \"aria-label\": \"Frame rate\",\n          sx: {\n            width: '150px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Frame Interval (ms)\",\n          type: \"number\",\n          value: frameInterval,\n          onChange: e => {\n            setFrameInterval(e.target.value);\n          },\n          onBlur: () => {\n            const numValue = parseInt(frameInterval);\n            if (isNaN(numValue) || numValue < 10) {\n              setFrameInterval(100);\n            } else {\n              setFrameInterval(numValue);\n            }\n          },\n          size: \"small\",\n          inputProps: {\n            min: 10,\n            step: 10\n          },\n          \"aria-label\": \"Frame transition interval\",\n          sx: {\n            width: '150px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: downloadCsvAll,\n          variant: \"contained\",\n          color: \"primary\",\n          \"aria-label\": \"Save CSV\",\n          children: \"Save CSV\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          xs: 6,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            children: \"Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 13\n          }, this), !videoUrl || videoUrl && conversionProgress.status !== 'completed' ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: \"100%\",\n              maxWidth: \"800px\",\n              height: \"450px\",\n              bgcolor: 'background.paper',\n              border: 1,\n              borderColor: 'divider',\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              color: 'text.secondary',\n              fontSize: \"1.2rem\",\n              borderRadius: \"4px\",\n              flexDirection: \"column\",\n              gap: 2\n            },\n            \"aria-label\": \"Video placeholder\",\n            children: !videoUrl ? \"Please upload a video\" : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 40\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 772,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body1\",\n                children: \"Video is being processed...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Box, {\n            ref: videoContainerRef,\n            sx: {\n              width: \"100%\",\n              maxWidth: \"800px\",\n              height: \"450px\",\n              border: 1,\n              borderColor: 'divider',\n              borderRadius: \"4px\",\n              overflow: \"hidden\",\n              position: \"relative\",\n              cursor: isDragging ? 'grabbing' : zoom > 1 ? 'grab' : 'default',\n              backgroundColor: '#000'\n            },\n            onWheel: handleWheel,\n            onMouseDown: handleMouseDown,\n            children: /*#__PURE__*/_jsxDEV(\"video\", {\n              ref: videoRef,\n              src: conversionProgress.status === 'completed' ? videoUrl : undefined,\n              style: {\n                width: \"100%\",\n                height: \"100%\",\n                objectFit: \"contain\",\n                transform: `scale(${zoom}) translate(${panX / zoom}px, ${panY / zoom}px)`,\n                transformOrigin: \"center center\",\n                transition: isDragging ? 'none' : 'transform 0.1s ease-out'\n              },\n              onTimeUpdate: handleTimeUpdate,\n              onLoadedMetadata: e => {\n                setVideoDuration(e.target.duration);\n                console.log(\"Video loaded successfully, duration:\", e.target.duration);\n              },\n              onError: e => {\n                console.error(\"Video loading error:\", e);\n                if (conversionProgress.status === 'completed') {\n                  alert(\"Video playback failed: Please check the converted MP4 file.\");\n                }\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 797,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 780,\n            columnNumber: 31\n          }, this), videoUrl && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 2,\n                mt: 1,\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: movePrevFrame,\n                \"aria-label\": \"Previous frame\",\n                children: \"Prev Frame\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 825,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: moveNextFrame,\n                \"aria-label\": \"Next frame\",\n                children: \"Next Frame\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 832,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: markIntervalStart,\n                \"aria-label\": \"Mark start frame\",\n                children: \"Mark Start (S)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 839,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: markIntervalEnd,\n                \"aria-label\": \"Mark end frame\",\n                children: \"Mark End (E)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                children: [\"Current Frame: \", currentFrame, \" / \", Math.round(videoDuration * frameRate)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 853,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 824,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 2,\n                mt: 1,\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: zoomIn,\n                \"aria-label\": \"Zoom in\",\n                children: \"Zoom In (+)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 858,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: zoomOut,\n                \"aria-label\": \"Zoom out\",\n                children: \"Zoom Out (-)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 865,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                onClick: resetZoom,\n                \"aria-label\": \"Reset zoom\",\n                children: \"Reset Zoom\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 872,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: [\"Zoom: \", Math.round(zoom * 100), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 879,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                sx: {\n                  ml: 2\n                },\n                children: \"Mouse wheel to zoom, click and drag to pan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 882,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Slider, {\n              value: currentFrame,\n              min: 0,\n              max: Math.round(videoDuration * frameRate),\n              step: 1,\n              onChange: handleSliderChange,\n              \"aria-label\": \"Video frame timeline\",\n              sx: {\n                mt: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 886,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              p: 2,\n              border: 1,\n              borderColor: 'divider',\n              borderRadius: 1,\n              bgcolor: 'background.paper',\n              height: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Behavior Intervals\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 907,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              gutterBottom: true,\n              children: \"Shortcuts: ArrowRight/ArrowLeft to navigate and mark end, S to mark start, E to update end, 1-6 to select behavior and add interval, +/- to zoom, 0 to reset zoom\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 908,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                gap: 2,\n                alignItems: 'center',\n                mb: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(TextField, {\n                label: \"Start Frame\",\n                type: \"number\",\n                value: intervalStartFrame,\n                onChange: e => {\n                  const v = e.target.value;\n                  console.log(\"Start Frame input:\", v);\n                  setIntervalStartFrame(v);\n                  if (v !== \"\") setMarkStart(Number(v));else setMarkStart(null);\n                },\n                size: \"small\",\n                inputProps: {\n                  min: 0,\n                  step: 1\n                },\n                \"aria-label\": \"Interval start frame\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                label: \"End Frame\",\n                type: \"number\",\n                value: intervalStartFrame !== \"\" ? intervalEndFrame : \"\",\n                onChange: e => {\n                  const v = e.target.value;\n                  console.log(\"End Frame input:\", v);\n                  setIntervalEndFrame(v);\n                },\n                size: \"small\",\n                inputProps: {\n                  min: intervalStartFrame !== \"\" ? Number(intervalStartFrame) : 0,\n                  step: 1\n                },\n                \"aria-label\": \"Interval end frame\",\n                disabled: intervalStartFrame === \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 927,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                size: \"small\",\n                sx: {\n                  minWidth: 200\n                },\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  children: \"Behavior\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 942,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  value: intervalBehavior,\n                  label: \"Behavior\",\n                  onChange: e => setIntervalBehavior(e.target.value),\n                  children: behaviors.map((b, i) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: b,\n                    children: `${b} (${i + 1})`\n                  }, b, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 949,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 943,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 941,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => addInterval(intervalBehavior),\n                variant: \"contained\",\n                \"aria-label\": \"Add interval\",\n                disabled: intervalStartFrame === \"\" || intervalEndFrame === \"\",\n                children: \"Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 953,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 911,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              size: \"small\",\n              children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                children: /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    children: \"Interval (Frame)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 965,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: \"Behavior\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 966,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: \"Delete\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 967,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 964,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 963,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                children: intervals.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: /*#__PURE__*/_jsxDEV(TableCell, {\n                    colSpan: 3,\n                    align: \"center\",\n                    children: \"No intervals added yet.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 973,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 972,\n                  columnNumber: 21\n                }, this) : intervals.slice().sort((a, b) => b.start - a.start).slice(page * rowsPerPage, (page + 1) * rowsPerPage).map((interval, i) => /*#__PURE__*/_jsxDEV(TableRow, {\n                  children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                    children: `${interval.start} - ${interval.end}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 984,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(FormControl, {\n                      size: \"small\",\n                      sx: {\n                        minWidth: 200\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                        children: \"Behavior\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 987,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(Select, {\n                        value: interval.behavior,\n                        label: \"Behavior\",\n                        onChange: e => updateIntervalBehavior(intervals.indexOf(interval), e.target.value),\n                        children: behaviors.map((b, j) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                          value: b,\n                          children: `${b} (${j + 1})`\n                        }, b, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 994,\n                          columnNumber: 35\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 988,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 986,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 985,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      variant: \"outlined\",\n                      color: \"error\",\n                      size: \"small\",\n                      onClick: () => removeInterval(intervals.indexOf(interval)),\n                      \"aria-label\": `Delete interval ${i + 1}`,\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1000,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 999,\n                    columnNumber: 27\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 983,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 970,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 962,\n              columnNumber: 15\n            }, this), intervals.length > rowsPerPage && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2,\n                display: 'flex',\n                gap: 2\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setPage(p => Math.max(0, p - 1)),\n                disabled: page === 0,\n                variant: \"outlined\",\n                \"aria-label\": \"Previous page\",\n                children: \"Previous\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1017,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setPage(p => p + 1),\n                disabled: (page + 1) * rowsPerPage >= intervals.length,\n                variant: \"outlined\",\n                \"aria-label\": \"Next page\",\n                children: \"Next\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1025,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                children: [\"Page \", page + 1, \" / \", Math.ceil(intervals.length / rowsPerPage)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1033,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1016,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 899,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 574,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 572,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"pQC6l67XA3tT2CdKmdi/PkwW8sk=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useState","useEffect","Button","Select","MenuItem","Box","Typography","Grid","Table","TableHead","TableRow","TableCell","TableBody","CircularProgress","TextField","FormControl","InputLabel","Slider","IconButton","LinearProgress","ThemeProvider","createTheme","CssBaseline","Brightness4Icon","Brightness7Icon","Papa","JSZip","saveAs","jsxDEV","_jsxDEV","Fragment","_Fragment","behaviors","rowsPerPage","App","_s","_conversionProgress$c","_conversionProgress$t","intervals","setIntervals","intervalStartFrame","setIntervalStartFrame","intervalEndFrame","setIntervalEndFrame","intervalBehavior","setIntervalBehavior","isUploading","setIsUploading","isConverting","setIsConverting","uploadProgress","setUploadProgress","conversionProgress","setConversionProgress","percent","current_frame","total_frames","speed","time_processed","eta","status","sessionId","setSessionId","page","setPage","frameRate","setFrameRate","frameInterval","setFrameInterval","videoUrl","setVideoUrl","videoDuration","setVideoDuration","currentTime","setCurrentTime","currentFrame","setCurrentFrame","currentFrameRef","markStart","setMarkStart","isAddingInterval","setIsAddingInterval","themeMode","setThemeMode","arrowPressed","setArrowPressed","zoom","setZoom","panX","setPanX","panY","setPanY","isDragging","setIsDragging","dragStart","setDragStart","x","y","videoRef","frameIntervalRef","videoContainerRef","theme","palette","mode","background","default","paper","text","primary","secondary","main","divider","components","MuiCssBaseline","styleOverrides","body","backgroundColor","margin","padding","html","MuiTextField","root","borderColor","MuiButton","outlined","toggleTheme","prev","pollProgress","console","log","response","fetch","progressData","json","setTimeout","current","load","alert","error","document","style","documentElement","onFileChange","e","files","Array","from","target","length","file","type","startsWith","name","fd","FormData","append","res","method","then","msg","session_id","converted_url","message","src","onloadedmetadata","duration","onerror","handleKeyDown","activeElement","isInInputField","tagName","contentEditable","code","preventDefault","markIntervalStart","markIntervalEnd","includes","behaviorIndex","parseInt","replace","selectedBehavior","addInterval","zoomIn","zoomOut","resetZoom","handleKeyUp","window","addEventListener","removeEventListener","moveFrame","direction","newFrame","newTime","toFixed","clearTimeout","handleGlobalMouseMove","handleMouseMove","handleGlobalMouseUp","handleMouseUp","handleTimeUpdate","time","Math","round","handleSliderChange","event","newValue","moveNextFrame","movePrevFrame","min","max","handleWheel","delta","deltaY","handleMouseDown","clientX","clientY","behavior","startFrame","endFrame","startTime","endTime","maxFrame","isNaN","start","end","auto","updateIntervalBehavior","idx","newBehavior","map","interval","i","removeInterval","filter","_","downloadCsvAll","zip","intervalData","start_time","end_time","start_frame","end_frame","intervalCsv","unparse","generateAsync","blob","children","fileName","_jsxFileName","lineNumber","columnNumber","sx","minHeight","bgcolor","color","p","display","justifyContent","alignItems","mb","variant","gutterBottom","onClick","my","gap","accept","onChange","disabled","mt","border","borderRadius","value","height","process","env","NODE_ENV","container","spacing","xs","toLocaleString","size","label","onBlur","numValue","parseFloat","inputProps","step","width","maxWidth","fontSize","flexDirection","ref","overflow","position","cursor","onWheel","onMouseDown","undefined","objectFit","transform","transformOrigin","transition","onTimeUpdate","onLoadedMetadata","onError","ml","item","v","Number","minWidth","b","colSpan","align","slice","sort","a","indexOf","j","ceil","_c","$RefreshReg$"],"sources":["/media/sj/linux/annotator/behavior_annotator/frame-tool-jm-main/frontend/src/App.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport {\n  Button, Select, MenuItem, Box, Typography, Grid,\n  Table, TableHead, TableRow, TableCell, TableBody, CircularProgress,\n  TextField, FormControl, InputLabel, Slider, IconButton, LinearProgress\n} from \"@mui/material\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport { CssBaseline } from \"@mui/material\";\nimport Brightness4Icon from \"@mui/icons-material/Brightness4\";\nimport Brightness7Icon from \"@mui/icons-material/Brightness7\";\nimport Papa from \"papaparse\";\nimport JSZip from \"jszip\";\nimport { saveAs } from \"file-saver\";\n\nconst behaviors = [\"attacking\", \"jumping\", \"unsupported rearing\", \"supported rearing\", \"grooming\", \"freezing\"];\nconst rowsPerPage = 15;\n\nfunction App() {\n  const [intervals, setIntervals] = useState([]);\n  const [intervalStartFrame, setIntervalStartFrame] = useState(\"\");\n  const [intervalEndFrame, setIntervalEndFrame] = useState(\"\");\n  const [intervalBehavior, setIntervalBehavior] = useState(behaviors[0]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isConverting, setIsConverting] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [conversionProgress, setConversionProgress] = useState({\n    percent: 0,\n    current_frame: 0,\n    total_frames: 0,\n    speed: '0x',\n    time_processed: '00:00:00',\n    eta: 'calculating...',\n    status: 'idle'\n  });\n  const [sessionId, setSessionId] = useState(null);\n  const [page, setPage] = useState(0);\n  const [frameRate, setFrameRate] = useState(30); // Default FPS set to 30\n  const [frameInterval, setFrameInterval] = useState(100); // Frame transition interval in ms\n  const [videoUrl, setVideoUrl] = useState(null);\n  const [videoDuration, setVideoDuration] = useState(0);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [currentFrame, setCurrentFrame] = useState(0);\n  const currentFrameRef = useRef(0);\n  const [markStart, setMarkStart] = useState(null);\n  const [isAddingInterval, setIsAddingInterval] = useState(false);\n  const [themeMode, setThemeMode] = useState(\"light\");\n  const [arrowPressed, setArrowPressed] = useState(null);\n  const [zoom, setZoom] = useState(1);\n  const [panX, setPanX] = useState(0);\n  const [panY, setPanY] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n\n  const videoRef = useRef(null);\n  const frameIntervalRef = useRef(null);\n  const videoContainerRef = useRef(null);\n\n  const theme = createTheme({\n    palette: {\n      mode: themeMode,\n      ...(themeMode === \"dark\" ? {\n        background: { \n          default: \"#2d2d2d\", // Brighter dark gray for main background\n          paper: \"#3a3a3a\"    // Slightly lighter dark gray for cards/papers\n        },\n        text: { \n          primary: \"#e0e0e0\",   // Brighter text for better readability\n          secondary: \"#b0b0b0\"  // Secondary text color\n        },\n        primary: { main: \"#e7657cff\" },\n        divider: \"#4a4a4a\",     // Dark gray dividers\n      } : {\n        background: { default: \"#ffffff\", paper: \"#ffffff\" },\n        text: { primary: \"#000000\", secondary: \"#666666\" },\n        primary: { main: \"#e7657cff\" },\n        divider: \"#e0e0e0\",\n      }),\n    },\n    components: {\n      // Ensure dark theme is applied to borders and other components\n      ...(themeMode === \"dark\" && {\n        MuiCssBaseline: {\n          styleOverrides: {\n            body: {\n              backgroundColor: \"#2d2d2d\",\n              margin: 0,\n              padding: 0,\n            },\n            html: {\n              backgroundColor: \"#2d2d2d\",\n            }\n          },\n        },\n        MuiTextField: {\n          styleOverrides: {\n            root: {\n              '& .MuiOutlinedInput-root': {\n                '& fieldset': {\n                  borderColor: '#5a5a5a',\n                },\n                '&:hover fieldset': {\n                  borderColor: '#7a7a7a',\n                },\n              },\n            },\n          },\n        },\n        MuiButton: {\n          styleOverrides: {\n            outlined: {\n              borderColor: '#5a5a5a',\n              '&:hover': {\n                borderColor: '#7a7a7a',\n              },\n            },\n          },\n        },\n      }),\n    },\n  });\n\n  const toggleTheme = () => {\n    setThemeMode(prev => (prev === \"light\" ? \"dark\" : \"light\"));\n  };\n\n  // Progress polling function\n  const pollProgress = async (sessionId) => {\n    try {\n      console.log(`Polling progress for session: ${sessionId}`);\n      const response = await fetch(`http://localhost:5000/progress/${sessionId}`);\n      const progressData = await response.json();\n      \n      console.log(\"Progress data received:\", progressData);\n      setConversionProgress(progressData);\n      \n      // Continue polling if still processing\n      if (progressData.status === 'processing' && progressData.percent < 100) {\n        setTimeout(() => pollProgress(sessionId), 500); // Poll every 500ms\n      } else if (progressData.status === 'completed') {\n        setIsConverting(false);\n        setUploadProgress(100);\n        console.log(\"Video conversion completed!\");\n        \n        // Now that conversion is complete, the video should be accessible\n        // Trigger video load\n        if (videoRef.current) {\n          videoRef.current.load();\n        }\n      } else if (progressData.status === 'error') {\n        setIsConverting(false);\n        alert(`Video processing failed: ${progressData.error || 'Unknown error'}`);\n        // Reset video URL on error\n        setVideoUrl(null);\n      }\n    } catch (error) {\n      console.error(\"Error polling progress:\", error);\n      setTimeout(() => pollProgress(sessionId), 1000); // Retry in 1 second\n    }\n  };\n\n  // Apply background color to body element immediately\n  useEffect(() => {\n    const backgroundColor = themeMode === \"dark\" ? \"#2d2d2d\" : \"#ffffff\";\n    document.body.style.backgroundColor = backgroundColor;\n    document.documentElement.style.backgroundColor = backgroundColor;\n    \n    return () => {\n      // Clean up on unmount\n      document.body.style.backgroundColor = \"\";\n      document.documentElement.style.backgroundColor = \"\";\n    };\n  }, [themeMode]);\n\n  async function onFileChange(e) {\n    const files = Array.from(e.target.files);\n    if (files.length === 0) {\n      alert(\"Please select a video.\");\n      return;\n    }\n    \n    // Reset progress states\n    setIsUploading(true);\n    setIsConverting(true);\n    setUploadProgress(0);\n    setConversionProgress({\n      percent: 0,\n      current_frame: 0,\n      total_frames: 0,\n      speed: '0x',\n      time_processed: '00:00:00',\n      eta: 'calculating...',\n      status: 'uploading'\n    });\n\n    const file = files[0];\n    if (!file.type.startsWith(\"video/\")) {\n      alert(\"Only video files can be uploaded.\");\n      setIsUploading(false);\n      setIsConverting(false);\n      return;\n    }\n    console.log(\"Video file uploaded:\", file.name, \"Type:\", file.type);\n\n    const fd = new FormData();\n    fd.append(\"video\", file);\n    \n    try {\n      // Simulate upload progress (since fetch doesn't provide upload progress easily)\n      setUploadProgress(25);\n      \n      const res = await fetch(\"http://localhost:5000/process-video\", {\n        method: \"POST\",\n        body: fd,\n      }).then(res => res.json());\n      \n      setUploadProgress(50);\n      \n      if (res.status === \"error\") {\n        alert(`Video processing failed: ${res.msg}`);\n        setIsUploading(false);\n        setIsConverting(false);\n        return;\n      }\n      \n      // Upload completed, now start conversion tracking\n      setIsUploading(false);\n      setUploadProgress(100);\n      setSessionId(res.session_id);\n      setVideoUrl(res.converted_url);\n      \n      console.log(\"Upload completed, session ID:\", res.session_id);\n      console.log(\"Video URL:\", res.converted_url);\n      \n      // Reset other states\n      setCurrentTime(0);\n      setCurrentFrame(0);\n      currentFrameRef.current = 0;\n      setIntervals([]);\n      setMarkStart(null);\n      setIntervalStartFrame(\"\");\n      setIntervalEndFrame(\"\");\n      setPage(0);\n      // Reset zoom when new video is loaded\n      setZoom(1);\n      setPanX(0);\n      setPanY(0);\n      \n      // Start polling for conversion progress\n      console.log(\"Starting progress polling for session:\", res.session_id);\n      pollProgress(res.session_id);\n      \n    } catch (error) {\n      alert(`Video processing failed: ${error.message}`);\n      setIsUploading(false);\n      setIsConverting(false);\n      setUploadProgress(0);\n    }\n  }\n\n  useEffect(() => {\n    if (videoUrl && videoRef.current) {\n      console.log(\"Setting video src:\", videoUrl);\n      videoRef.current.src = videoUrl;\n      videoRef.current.load();\n      videoRef.current.onloadedmetadata = () => {\n        console.log(\"Video metadata loaded, duration:\", videoRef.current.duration);\n        setVideoDuration(videoRef.current.duration);\n      };\n      videoRef.current.onerror = (e) => {\n        console.error(\"Video error:\", e);\n        alert(\"Video playback failed: Please check the converted MP4 file.\");\n      };\n    }\n    return () => {\n      if (videoRef.current) {\n        console.log(\"Cleaning up videoRef\");\n        videoRef.current.onloadedmetadata = null;\n        videoRef.current.onerror = null;\n      }\n    };\n  }, [videoUrl]);\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      // Check if user is typing in an input field\n      const activeElement = document.activeElement;\n      const isInInputField = activeElement && (\n        activeElement.tagName === 'INPUT' || \n        activeElement.tagName === 'TEXTAREA' ||\n        activeElement.contentEditable === 'true'\n      );\n      \n      // If user is typing in an input field, don't interfere with keyboard input\n      if (isInInputField) {\n        return;\n      }\n      \n      // Only prevent default for our shortcuts, not for input fields\n      if (isAddingInterval) return;\n      \n      if (e.code === \"KeyS\") {\n        e.preventDefault();\n        markIntervalStart();\n      } else if (e.code === \"KeyE\") {\n        e.preventDefault();\n        markIntervalEnd();\n      } else if ([\"Digit1\", \"Digit2\", \"Digit3\", \"Digit4\", \"Digit5\", \"Digit6\"].includes(e.code)) {\n        e.preventDefault();\n        const behaviorIndex = parseInt(e.code.replace(\"Digit\", \"\")) - 1;\n        if (behaviorIndex < behaviors.length && markStart !== null && intervalEndFrame !== \"\") {\n          setIsAddingInterval(true);\n          const selectedBehavior = behaviors[behaviorIndex];\n          console.log(`Behavior selected and interval added: ${selectedBehavior}`);\n          setIntervalBehavior(selectedBehavior);\n          addInterval(selectedBehavior);\n        }\n      } else if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\n        e.preventDefault();\n        setArrowPressed(e.code);\n      } else if (e.code === \"Equal\" || e.code === \"NumpadAdd\") { // + key for zoom in\n        e.preventDefault();\n        zoomIn();\n      } else if (e.code === \"Minus\" || e.code === \"NumpadSubtract\") { // - key for zoom out\n        e.preventDefault();\n        zoomOut();\n      } else if (e.code === \"Digit0\" || e.code === \"Numpad0\") { // 0 key for reset zoom\n        e.preventDefault();\n        resetZoom();\n      }\n    };\n\n    const handleKeyUp = (e) => {\n      if (e.code === \"ArrowRight\" || e.code === \"ArrowLeft\") {\n        setArrowPressed(null);\n        if (markStart !== null) {\n          markIntervalEnd();\n        }\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    window.addEventListener(\"keyup\", handleKeyUp);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n      window.removeEventListener(\"keyup\", handleKeyUp);\n    };\n  }, [markStart, intervalEndFrame, isAddingInterval]);\n\n  useEffect(() => {\n    currentFrameRef.current = currentFrame;\n  }, [currentFrame]);\n\n  useEffect(() => {\n    if (arrowPressed) {\n      const moveFrame = () => {\n        if (!videoRef.current) return;\n        const direction = arrowPressed === \"ArrowRight\" ? 1 : -1;\n        const newFrame = currentFrameRef.current + direction;\n        const newTime = newFrame / frameRate;\n        if (newTime >= 0 && newTime <= videoDuration) {\n          setCurrentTime(newTime);\n          setCurrentFrame(newFrame);\n          currentFrameRef.current = newFrame;\n          videoRef.current.currentTime = newTime;\n          console.log(`Moved to frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n        }\n        frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\n      };\n      frameIntervalRef.current = setTimeout(moveFrame, frameInterval);\n    } else {\n      if (frameIntervalRef.current) {\n        clearTimeout(frameIntervalRef.current);\n        frameIntervalRef.current = null;\n      }\n    }\n    return () => {\n      if (frameIntervalRef.current) {\n        clearTimeout(frameIntervalRef.current);\n      }\n    };\n  }, [arrowPressed, frameRate, videoDuration, frameInterval]);\n\n  useEffect(() => {\n    if (isAddingInterval) {\n      setIsAddingInterval(false);\n    }\n  }, [intervals]);\n\n  // Mouse event handlers for zoom and pan\n  useEffect(() => {\n    const handleGlobalMouseMove = (e) => handleMouseMove(e);\n    const handleGlobalMouseUp = () => handleMouseUp();\n\n    if (isDragging) {\n      document.addEventListener('mousemove', handleGlobalMouseMove);\n      document.addEventListener('mouseup', handleGlobalMouseUp);\n    }\n\n    return () => {\n      document.removeEventListener('mousemove', handleGlobalMouseMove);\n      document.removeEventListener('mouseup', handleGlobalMouseUp);\n    };\n  }, [isDragging, dragStart.x, dragStart.y]);\n\n  function handleTimeUpdate() {\n    if (!videoRef.current) return;\n    const time = videoRef.current.currentTime;\n    setCurrentTime(time);\n    const newFrame = Math.round(time * frameRate);\n    setCurrentFrame(newFrame);\n    currentFrameRef.current = newFrame;\n  }\n\n  function handleSliderChange(event, newValue) {\n    const newTime = newValue / frameRate;\n    setCurrentTime(newTime);\n    setCurrentFrame(newValue);\n    currentFrameRef.current = newValue;\n    if (videoRef.current) {\n      console.log(\"Slider changed, setting video frame:\", newValue);\n      videoRef.current.currentTime = newTime;\n    }\n  }\n\n  function moveNextFrame() {\n    const newFrame = currentFrame + 1;\n    const newTime = newFrame / frameRate;\n    if (newTime <= videoDuration) {\n      setCurrentTime(newTime);\n      setCurrentFrame(newFrame);\n      currentFrameRef.current = newFrame;\n      if (videoRef.current) {\n        videoRef.current.currentTime = newTime;\n        console.log(`Next frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n      }\n    }\n  }\n\n  function movePrevFrame() {\n    const newFrame = currentFrame - 1;\n    const newTime = newFrame / frameRate;\n    if (newTime >= 0) {\n      setCurrentTime(newTime);\n      setCurrentFrame(newFrame);\n      currentFrameRef.current = newFrame;\n      if (videoRef.current) {\n        videoRef.current.currentTime = newTime;\n        console.log(`Previous frame: ${newFrame}, time: ${newTime.toFixed(2)}s`);\n      }\n    }\n  }\n\n  // Zoom functions\n  function zoomIn() {\n    setZoom(prev => Math.min(prev * 1.5, 5)); // Max zoom 5x\n  }\n\n  function zoomOut() {\n    setZoom(prev => Math.max(prev / 1.5, 0.5)); // Min zoom 0.5x\n  }\n\n  function resetZoom() {\n    setZoom(1);\n    setPanX(0);\n    setPanY(0);\n  }\n\n  function handleWheel(e) {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? 0.9 : 1.1;\n    setZoom(prev => Math.min(Math.max(prev * delta, 0.5), 5));\n  }\n\n  function handleMouseDown(e) {\n    setIsDragging(true);\n    setDragStart({ x: e.clientX - panX, y: e.clientY - panY });\n  }\n\n  function handleMouseMove(e) {\n    if (!isDragging) return;\n    setPanX(e.clientX - dragStart.x);\n    setPanY(e.clientY - dragStart.y);\n  }\n\n  function handleMouseUp() {\n    setIsDragging(false);\n  }\n\n  function markIntervalStart() {\n    setMarkStart(currentFrameRef.current);\n    setIntervalStartFrame(currentFrameRef.current);\n    setIntervalEndFrame(\"\");\n    console.log(\"Interval start marked:\", currentFrameRef.current);\n  }\n\n  function markIntervalEnd() {\n    if (markStart === null) {\n      alert(\"Please mark the start frame first.\");\n      return;\n    }\n    setIntervalEndFrame(currentFrameRef.current);\n    console.log(\"Interval end updated:\", currentFrameRef.current);\n  }\n\n  function addInterval(behavior) {\n    const startFrame = parseInt(intervalStartFrame);\n    const endFrame = parseInt(intervalEndFrame);\n    const startTime = startFrame / frameRate;\n    const endTime = endFrame / frameRate;\n    const maxFrame = Math.round(videoDuration * frameRate);\n    if (isNaN(startFrame) || isNaN(endFrame)) {\n      alert(\"Start and end frames must be valid numbers.\");\n      setIsAddingInterval(false);\n      return;\n    }\n    if (startFrame < 0 || endFrame > maxFrame) {\n      alert(`Frames must be between 0 and ${maxFrame}.`);\n      setIsAddingInterval(false);\n      return;\n    }\n    if (startFrame >= endFrame) {\n      alert(\"Start frame must be less than end frame.\");\n      setIsAddingInterval(false);\n      return;\n    }\n    setIntervals(prev => [\n      ...prev,\n      { start: startFrame, end: endFrame, startTime, endTime, behavior, auto: false },\n    ]);\n    setIntervalStartFrame(\"\");\n    setIntervalEndFrame(\"\");\n    setIntervalBehavior(behaviors[0]);\n    setMarkStart(null);\n    setPage(0);\n    console.log(\"Interval added:\", { start: startFrame, end: endFrame, startTime, endTime, behavior });\n  }\n\n  function updateIntervalBehavior(idx, newBehavior) {\n    setIntervals(prev =>\n      prev.map((interval, i) =>\n        i === idx ? { ...interval, behavior: newBehavior } : interval\n      )\n    );\n    console.log(\"Interval behavior updated:\", { idx, behavior: newBehavior });\n  }\n\n  function removeInterval(idx) {\n    setIntervals(intervals.filter((_, i) => i !== idx));\n    if (page * rowsPerPage >= intervals.length - 1) {\n      setPage(Math.max(0, page - 1));\n    }\n  }\n\n  function downloadCsvAll() {\n    const zip = new JSZip();\n    const intervalData = intervals.map(i => ({\n      type: \"interval\",\n      start_time: i.startTime.toFixed(2),\n      end_time: i.endTime.toFixed(2),\n      start_frame: i.start,\n      end_frame: i.end,\n      behavior: i.behavior,\n    }));\n    const intervalCsv = Papa.unparse(intervalData);\n    zip.file(\"interval_summary.csv\", intervalCsv);\n    zip.generateAsync({ type: \"blob\" }).then(blob => {\n      saveAs(blob, \"behavior_labels.zip\");\n    });\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Box sx={{ \n        minHeight: '100vh', \n        bgcolor: 'background.default', \n        color: 'text.primary',\n        p: 2\n      }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n          <Typography variant=\"h4\" gutterBottom>Behavior Labeling Tool</Typography>\n          <IconButton onClick={toggleTheme} color=\"inherit\" aria-label=\"Toggle theme\">\n            {themeMode === \"light\" ? <Brightness4Icon /> : <Brightness7Icon />}\n          </IconButton>\n        </Box>\n        <Box sx={{ my: 2, display: 'flex', gap: 2, alignItems: 'center' }}>\n          <Box>\n            <Typography variant=\"body2\" gutterBottom>Select Video</Typography>\n            <input\n              type=\"file\"\n              accept=\"video/*\"\n              onChange={onFileChange}\n              disabled={isConverting}\n              aria-label=\"Select video file\"\n            />\n            {(isUploading || isConverting) && (\n              <Box sx={{ mt: 2, p: 2, border: 1, borderColor: 'divider', borderRadius: 1, bgcolor: 'background.paper' }}>\n                <Typography variant=\"h6\" gutterBottom>\n                  {isUploading ? 'Uploading Video...' : 'Converting Video...'}\n                </Typography>\n                \n                {isUploading && (\n                  <Box sx={{ mb: 2 }}>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                      <Typography variant=\"body2\">Upload Progress</Typography>\n                      <Typography variant=\"body2\">{uploadProgress}%</Typography>\n                    </Box>\n                    <LinearProgress \n                      variant=\"determinate\" \n                      value={uploadProgress} \n                      sx={{ height: 8, borderRadius: 4 }}\n                    />\n                  </Box>\n                )}\n                \n                {isConverting && conversionProgress.status === 'processing' && (\n                  <Box>\n                    <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                      <Typography variant=\"body2\">Conversion Progress</Typography>\n                      <Typography variant=\"body2\">\n                        {conversionProgress.percent > 0 ? `${Math.round(conversionProgress.percent)}%` : 'Processing...'}\n                      </Typography>\n                    </Box>\n                    \n                    {/* Debug info */}\n                    {process.env.NODE_ENV === 'development' && (\n                      <Typography variant=\"caption\" sx={{ display: 'block', mb: 1, color: 'orange' }}>\n                        DEBUG: status={conversionProgress.status}, percent={conversionProgress.percent}, frame={conversionProgress.current_frame}\n                      </Typography>\n                    )}\n                    \n                    {conversionProgress.percent > 0 ? (\n                      <LinearProgress \n                        variant=\"determinate\" \n                        value={conversionProgress.percent} \n                        sx={{ height: 8, borderRadius: 4, mb: 2 }}\n                      />\n                    ) : (\n                      <LinearProgress \n                        variant=\"indeterminate\"\n                        sx={{ height: 8, borderRadius: 4, mb: 2 }}\n                      />\n                    )}\n                    \n                    <Grid container spacing={2}>\n                      {conversionProgress.current_frame > 0 && (\n                        <Grid xs={6}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Frame: {conversionProgress.current_frame?.toLocaleString()} \n                            {conversionProgress.total_frames ? ` / ${conversionProgress.total_frames?.toLocaleString()}` : ''}\n                          </Typography>\n                        </Grid>\n                      )}\n                      {conversionProgress.speed && conversionProgress.speed !== '0x' && (\n                        <Grid xs={6}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Speed: {conversionProgress.speed}\n                          </Typography>\n                        </Grid>\n                      )}\n                      {conversionProgress.time_processed && conversionProgress.time_processed !== '00:00:00' && (\n                        <Grid xs={6}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            Time: {conversionProgress.time_processed}\n                          </Typography>\n                        </Grid>\n                      )}\n                      {conversionProgress.eta && conversionProgress.eta !== 'calculating...' && (\n                        <Grid xs={6}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            ETA: {conversionProgress.eta}\n                          </Typography>\n                        </Grid>\n                      )}\n                      {(!conversionProgress.current_frame || conversionProgress.current_frame === 0) && (\n                        <Grid xs={12}>\n                          <Typography variant=\"caption\" color=\"text.secondary\">\n                            FFmpeg is analyzing your video and starting conversion...\n                          </Typography>\n                        </Grid>\n                      )}\n                    </Grid>\n                  </Box>\n                )}\n\n                {isConverting && (!conversionProgress.status || conversionProgress.status === 'uploading') && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                    <CircularProgress size={20} />\n                    <Typography variant=\"body2\">Preparing for conversion...</Typography>\n                  </Box>\n                )}\n              </Box>\n            )}\n          </Box>\n          <TextField\n            label=\"Frame Rate (FPS)\"\n            type=\"number\"\n            value={frameRate}\n            onChange={(e) => {\n              setFrameRate(e.target.value);\n            }}\n            onBlur={() => {\n              const numValue = parseFloat(frameRate);\n              if (isNaN(numValue) || numValue < 1) {\n                setFrameRate(30);\n              } else {\n                setFrameRate(numValue);\n              }\n            }}\n            size=\"small\"\n            inputProps={{ min: 1, step: 1 }}\n            aria-label=\"Frame rate\"\n            sx={{ width: '150px' }}\n          />\n          <TextField\n            label=\"Frame Interval (ms)\"\n            type=\"number\"\n            value={frameInterval}\n            onChange={(e) => {\n              setFrameInterval(e.target.value);\n            }}\n            onBlur={() => {\n              const numValue = parseInt(frameInterval);\n              if (isNaN(numValue) || numValue < 10) {\n                setFrameInterval(100);\n              } else {\n                setFrameInterval(numValue);\n              }\n            }}\n            size=\"small\"\n            inputProps={{ min: 10, step: 10 }}\n            aria-label=\"Frame transition interval\"\n            sx={{ width: '150px' }}\n          />\n          <Button\n            onClick={downloadCsvAll}\n            variant=\"contained\"\n            color=\"primary\"\n            aria-label=\"Save CSV\"\n          >\n            Save CSV\n          </Button>\n        </Box>\n\n        <Grid container spacing={2}>\n          <Grid xs={6}>\n            <Typography variant=\"h6\">Video</Typography>\n            {!videoUrl || (videoUrl && conversionProgress.status !== 'completed') ? (\n              <Box\n                sx={{\n                  width: \"100%\",\n                  maxWidth: \"800px\",\n                  height: \"450px\",\n                  bgcolor: 'background.paper',\n                  border: 1,\n                  borderColor: 'divider',\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  color: 'text.secondary',\n                  fontSize: \"1.2rem\",\n                  borderRadius: \"4px\",\n                  flexDirection: \"column\",\n                  gap: 2\n                }}\n                aria-label=\"Video placeholder\"\n              >\n                {!videoUrl ? (\n                  \"Please upload a video\"\n                ) : (\n                  <>\n                    <CircularProgress size={40} />\n                    <Typography variant=\"body1\">\n                      Video is being processed...\n                    </Typography>\n                  </>\n                )}\n              </Box>\n            ) : (\n                              <Box\n                  ref={videoContainerRef}\n                  sx={{\n                    width: \"100%\",\n                    maxWidth: \"800px\",\n                    height: \"450px\",\n                    border: 1,\n                    borderColor: 'divider',\n                    borderRadius: \"4px\",\n                    overflow: \"hidden\",\n                    position: \"relative\",\n                    cursor: isDragging ? 'grabbing' : (zoom > 1 ? 'grab' : 'default'),\n                    backgroundColor: '#000'\n                  }}\n                  onWheel={handleWheel}\n                  onMouseDown={handleMouseDown}\n                >\n                <video\n                  ref={videoRef}\n                  src={conversionProgress.status === 'completed' ? videoUrl : undefined}\n                  style={{\n                    width: \"100%\",\n                    height: \"100%\",\n                    objectFit: \"contain\",\n                    transform: `scale(${zoom}) translate(${panX / zoom}px, ${panY / zoom}px)`,\n                    transformOrigin: \"center center\",\n                    transition: isDragging ? 'none' : 'transform 0.1s ease-out'\n                  }}\n                  onTimeUpdate={handleTimeUpdate}\n                  onLoadedMetadata={(e) => {\n                    setVideoDuration(e.target.duration);\n                    console.log(\"Video loaded successfully, duration:\", e.target.duration);\n                  }}\n                  onError={(e) => {\n                    console.error(\"Video loading error:\", e);\n                    if (conversionProgress.status === 'completed') {\n                      alert(\"Video playback failed: Please check the converted MP4 file.\");\n                    }\n                  }}\n                />\n              </Box>\n            )}\n            {videoUrl && (\n              <>\n                <Box sx={{ display: 'flex', gap: 2, mt: 1, alignItems: 'center' }}>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={movePrevFrame}\n                    aria-label=\"Previous frame\"\n                  >\n                    Prev Frame\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={moveNextFrame}\n                    aria-label=\"Next frame\"\n                  >\n                    Next Frame\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={markIntervalStart}\n                    aria-label=\"Mark start frame\"\n                  >\n                    Mark Start (S)\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={markIntervalEnd}\n                    aria-label=\"Mark end frame\"\n                  >\n                    Mark End (E)\n                  </Button>\n                  <Typography>\n                    Current Frame: {currentFrame} / {Math.round(videoDuration * frameRate)}\n                  </Typography>\n                </Box>\n                <Box sx={{ display: 'flex', gap: 2, mt: 1, alignItems: 'center' }}>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={zoomIn}\n                    aria-label=\"Zoom in\"\n                  >\n                    Zoom In (+)\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={zoomOut}\n                    aria-label=\"Zoom out\"\n                  >\n                    Zoom Out (-)\n                  </Button>\n                  <Button\n                    variant=\"outlined\"\n                    onClick={resetZoom}\n                    aria-label=\"Reset zoom\"\n                  >\n                    Reset Zoom\n                  </Button>\n                  <Typography variant=\"body2\">\n                    Zoom: {Math.round(zoom * 100)}%\n                  </Typography>\n                  <Typography variant=\"caption\" sx={{ ml: 2 }}>\n                    Mouse wheel to zoom, click and drag to pan\n                  </Typography>\n                </Box>\n                <Slider\n                  value={currentFrame}\n                  min={0}\n                  max={Math.round(videoDuration * frameRate)}\n                  step={1}\n                  onChange={handleSliderChange}\n                  aria-label=\"Video frame timeline\"\n                  sx={{ mt: 2 }}\n                />\n              </>\n            )}\n          </Grid>\n          <Grid item xs={6}>\n            <Box sx={{ \n              p: 2, \n              border: 1, \n              borderColor: 'divider', \n              borderRadius: 1, \n              bgcolor: 'background.paper', \n              height: '100%' \n            }}>\n              <Typography variant=\"h6\" gutterBottom>Behavior Intervals</Typography>\n              <Typography variant=\"body2\" gutterBottom>\n                Shortcuts: ArrowRight/ArrowLeft to navigate and mark end, S to mark start, E to update end, 1-6 to select behavior and add interval, +/- to zoom, 0 to reset zoom\n              </Typography>\n              <Box sx={{ display: 'flex', gap: 2, alignItems: 'center', mb: 2 }}>\n                <TextField\n                  label=\"Start Frame\"\n                  type=\"number\"\n                  value={intervalStartFrame}\n                  onChange={(e) => {\n                    const v = e.target.value;\n                    console.log(\"Start Frame input:\", v);\n                    setIntervalStartFrame(v);\n                    if (v !== \"\") setMarkStart(Number(v));\n                    else setMarkStart(null);\n                  }}\n                  size=\"small\"\n                  inputProps={{ min: 0, step: 1 }}\n                  aria-label=\"Interval start frame\"\n                />\n                <TextField\n                  label=\"End Frame\"\n                  type=\"number\"\n                  value={intervalStartFrame !== \"\" ? intervalEndFrame : \"\"}\n                  onChange={(e) => {\n                    const v = e.target.value;\n                    console.log(\"End Frame input:\", v);\n                    setIntervalEndFrame(v);\n                  }}\n                  size=\"small\"\n                  inputProps={{ min: intervalStartFrame !== \"\" ? Number(intervalStartFrame) : 0, step: 1 }}\n                  aria-label=\"Interval end frame\"\n                  disabled={intervalStartFrame === \"\"}\n                />\n                <FormControl size=\"small\" sx={{ minWidth: 200 }}>\n                  <InputLabel>Behavior</InputLabel>\n                  <Select\n                    value={intervalBehavior}\n                    label=\"Behavior\"\n                    onChange={(e) => setIntervalBehavior(e.target.value)}\n                  >\n                    {behaviors.map((b, i) => (\n                      <MenuItem key={b} value={b}>{`${b} (${i + 1})`}</MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n                <Button\n                  onClick={() => addInterval(intervalBehavior)}\n                  variant=\"contained\"\n                  aria-label=\"Add interval\"\n                  disabled={intervalStartFrame === \"\" || intervalEndFrame === \"\"}\n                >\n                  Add\n                </Button>\n              </Box>\n              <Table size=\"small\">\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Interval (Frame)</TableCell>\n                    <TableCell>Behavior</TableCell>\n                    <TableCell>Delete</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {intervals.length === 0 ? (\n                    <TableRow>\n                      <TableCell colSpan={3} align=\"center\">\n                        No intervals added yet.\n                      </TableCell>\n                    </TableRow>\n                  ) : (\n                    intervals\n                      .slice()\n                      .sort((a, b) => b.start - a.start)\n                      .slice(page * rowsPerPage, (page + 1) * rowsPerPage)\n                      .map((interval, i) => (\n                        <TableRow key={i}>\n                          <TableCell>{`${interval.start} - ${interval.end}`}</TableCell>\n                          <TableCell>\n                            <FormControl size=\"small\" sx={{ minWidth: 200 }}>\n                              <InputLabel>Behavior</InputLabel>\n                              <Select\n                                value={interval.behavior}\n                                label=\"Behavior\"\n                                onChange={(e) => updateIntervalBehavior(intervals.indexOf(interval), e.target.value)}\n                              >\n                                {behaviors.map((b, j) => (\n                                  <MenuItem key={b} value={b}>{`${b} (${j + 1})`}</MenuItem>\n                                ))}\n                              </Select>\n                            </FormControl>\n                          </TableCell>\n                          <TableCell>\n                            <Button\n                              variant=\"outlined\"\n                              color=\"error\"\n                              size=\"small\"\n                              onClick={() => removeInterval(intervals.indexOf(interval))}\n                              aria-label={`Delete interval ${i + 1}`}\n                            >\n                              Delete\n                            </Button>\n                          </TableCell>\n                        </TableRow>\n                      ))\n                  )}\n                </TableBody>\n              </Table>\n              {intervals.length > rowsPerPage && (\n                <Box sx={{ mt: 2, display: 'flex', gap: 2 }}>\n                  <Button\n                    onClick={() => setPage(p => Math.max(0, p - 1))}\n                    disabled={page === 0}\n                    variant=\"outlined\"\n                    aria-label=\"Previous page\"\n                  >\n                    Previous\n                  </Button>\n                  <Button\n                    onClick={() => setPage(p => p + 1)}\n                    disabled={(page + 1) * rowsPerPage >= intervals.length}\n                    variant=\"outlined\"\n                    aria-label=\"Next page\"\n                  >\n                    Next\n                  </Button>\n                  <Typography>\n                    Page {page + 1} / {Math.ceil(intervals.length / rowsPerPage)}\n                  </Typography>\n                </Box>\n              )}\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n    </ThemeProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}